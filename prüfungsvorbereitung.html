<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PflegefachProfi | Meistere die Pflegeplanung</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --primary-light: #eef2ff;
            --secondary: #7209b7;
            --accent: #f72585;
            --success: #4cc9f0;
            --warning: #fca311;
            --danger: #e63946;
            --coin: #ffd166;
            --text-primary: #1d3557;
            --text-secondary: #457b9d;
            --text-tertiary: #a8dadc;
            --background: #f1faee;
            --surface: #ffffff;
            --border: #e0e0e0;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            --shadow-elevated: 0 8px 24px rgba(0, 0, 0, 0.12);
            --radius: 12px;
            --radius-lg: 20px;
            --spacing-xs: 8px;
            --spacing-sm: 16px;
            --spacing-md: 24px;
            --spacing-lg: 32px;
            --spacing-xl: 48px;
            --spacing-xxl: 64px;
            --font-primary: 'Helvetica Neue', Helvetica, Arial, sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-primary);
            color: var(--text-primary);
            background-color: var(--background);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--spacing-md);
        }

        /* Header */
        .header {
            background-color: var(--surface);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--spacing-sm) 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-weight: 800;
            font-size: 1.5rem;
            color: var(--primary);
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .user-stats {
            display: flex;
            gap: var(--spacing-sm);
            align-items: center;
            flex-wrap: wrap;
            justify-content: flex-end;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 4px;
            background: var(--primary-light);
            padding: 6px 10px;
            border-radius: var(--radius);
            font-weight: 600;
            font-size: 0.8rem;
        }

        .level {
            background: var(--primary);
            color: white;
        }

        .xp {
            background: var(--success);
            color: white;
        }

        /* Hero Section */
        .hero {
            padding: var(--spacing-xxl) 0;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
            z-index: 1;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            max-width: 800px;
            text-align: center;
            margin: 0 auto;
        }

        .hero h1 {
            color: white;
            margin-bottom: var(--spacing-md);
            font-size: 2.5rem;
        }

        .hero p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.25rem;
            margin-bottom: var(--spacing-xl);
        }

        .cta-button {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            background: var(--accent);
            color: white;
            padding: var(--spacing-md) var(--spacing-xl);
            border-radius: var(--radius);
            font-weight: 700;
            text-decoration: none;
            box-shadow: var(--shadow-elevated);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: none;
            cursor: pointer;
            font-size: 1.1rem;
        }

        .cta-button:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 30px rgba(247, 37, 133, 0.4);
        }

        /* Learning Path */
        .learning-path {
            padding: var(--spacing-xl) 0;
            background: var(--background);
        }

        .path-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-lg);
            margin-top: var(--spacing-lg);
        }

        .path-card {
            background: var(--surface);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
        }

        .path-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
        }

        .path-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-elevated);
            border-color: var(--primary-light);
        }

        .path-card.locked {
            opacity: 0.7;
            filter: grayscale(0.5);
        }

        .path-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--spacing-md);
        }

        .path-icon {
            width: 60px;
            height: 60px;
            background: var(--primary-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-size: 1.5rem;
        }

        .path-cost {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            background: var(--coin);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: 20px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .path-title {
            font-size: 1.25rem;
            margin-bottom: var(--spacing-sm);
        }

        .path-description {
            color: var(--text-secondary);
            margin-bottom: var(--spacing-lg);
            font-size: 0.9rem;
        }

        .path-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--spacing-lg);
        }

        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-value {
            font-weight: 700;
            font-size: 1.1rem;
        }

        .stat-label {
            font-size: 0.75rem;
            color: var(--text-tertiary);
        }

        .path-action {
            width: 100%;
            padding: var(--spacing-md);
            border: none;
            border-radius: var(--radius);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }

        .path-action.unlock {
            background: var(--primary);
            color: white;
        }

        .path-action.unlock:hover {
            background: var(--primary-dark);
        }

        .path-action.start {
            background: var(--success);
            color: white;
        }

        .path-action.start:hover {
            background: #3ab0d9;
        }

        .path-action.continue {
            background: var(--accent);
            color: white;
        }

        .path-action.continue:hover {
            background: #e1156d;
        }

        /* Learning Module */
        .learning-module {
            display: none;
            padding: var(--spacing-xl) 0;
            background: var(--surface);
            min-height: 100vh;
        }

        .learning-module.active {
            display: block;
        }

        .module-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-lg);
            flex-wrap: wrap;
            gap: var(--spacing-md);
        }

        .module-progress {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .module-steps {
            display: flex;
            gap: var(--spacing-xs);
        }

        .step {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--border);
            transition: all 0.3s ease;
        }

        .step.active {
            background: var(--primary);
            transform: scale(1.2);
        }

        .step.completed {
            background: var(--success);
        }

        .lesson-content {
            max-width: 900px;
            margin: 0 auto;
            background: var(--surface);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        .lesson-card {
            display: none;
            padding: var(--spacing-xl);
            animation: fadeIn 0.5s ease;
        }

        .lesson-card.active {
            display: block;
        }

        .lesson-icon {
            width: 80px;
            height: 80px;
            background: var(--primary-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-size: 2rem;
            margin: 0 auto var(--spacing-lg);
        }

        .key-point {
            background: var(--primary-light);
            border-radius: var(--radius);
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
            border-left: 4px solid var(--primary);
        }

        .key-point i {
            color: var(--primary);
            margin-right: var(--spacing-xs);
        }

        .example-box {
            background: #fff9e6;
            border-radius: var(--radius);
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
            border-left: 4px solid var(--warning);
        }

        .example-title {
            font-weight: 700;
            color: var(--warning);
            margin-bottom: var(--spacing-xs);
        }

        .interactive-element {
            background: var(--background);
            border-radius: var(--radius);
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
            border: 2px dashed var(--primary);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: var(--spacing-xl);
        }

        .nav-btn {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            background: var(--primary);
            color: white;
            padding: var(--spacing-md) var(--spacing-lg);
            border: none;
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .nav-btn:hover {
            background: var(--primary-dark);
        }

        .nav-btn:disabled {
            background: var(--border);
            cursor: not-allowed;
        }

        /* Quiz Styles */
        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 var(--spacing-md);
        }

        .quiz-header {
            text-align: center;
            margin-bottom: var(--spacing-lg);
        }

        .quiz-progress {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-lg);
        }

        .quiz-question {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: var(--spacing-lg);
            color: var(--text-primary);
        }

        .quiz-options {
            display: grid;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
        }

        .quiz-option {
            background: var(--surface);
            border: 2px solid var(--border);
            border-radius: var(--radius);
            padding: var(--spacing-md);
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .quiz-option:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .quiz-option.correct {
            border-color: var(--success);
            background: rgba(76, 201, 240, 0.1);
        }

        .quiz-option.incorrect {
            border-color: var(--danger);
            background: rgba(230, 57, 70, 0.1);
        }

        .option-indicator {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.875rem;
            flex-shrink: 0;
        }

        .quiz-option.correct .option-indicator {
            border-color: var(--success);
            background: var(--success);
            color: white;
        }

        .quiz-option.incorrect .option-indicator {
            border-color: var(--danger);
            background: var(--danger);
            color: white;
        }

        .quiz-feedback {
            padding: var(--spacing-md);
            border-radius: var(--radius);
            margin-top: var(--spacing-md);
            display: none;
        }

        .quiz-feedback.correct {
            background: rgba(76, 201, 240, 0.1);
            border: 1px solid var(--success);
            color: var(--success);
        }

        .quiz-feedback.incorrect {
            background: rgba(230, 57, 70, 0.1);
            border: 1px solid var(--danger);
            color: var(--danger);
        }

        .quiz-results {
            text-align: center;
            padding: var(--spacing-xl);
            display: none;
        }

        .quiz-results.active {
            display: block;
            animation: fadeIn 0.8s ease;
        }

        .result-icon {
            font-size: 4rem;
            margin-bottom: var(--spacing-md);
        }

        .result-icon.correct {
            color: var(--success);
        }

        .result-score {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: var(--spacing-md);
        }

        .result-score.good {
            color: var(--success);
        }

        .result-score.average {
            color: var(--warning);
        }

        .result-score.poor {
            color: var(--danger);
        }

        .reward-animation {
            display: flex;
            justify-content: center;
            gap: var(--spacing-lg);
            margin: var(--spacing-lg) 0;
        }

        .reward-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .reward-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            animation: pulse 2s infinite;
        }

        .reward-icon.coins {
            background: var(--coin);
            color: var(--text-primary);
        }

        .reward-icon.xp {
            background: var(--success);
            color: white;
        }

        .reward-amount {
            font-weight: 700;
            font-size: 1.25rem;
        }

        .countdown {
            margin-top: var(--spacing-md);
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-secondary);
        }

        /* Login Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .modal.active {
            opacity: 1;
            pointer-events: all;
        }

        .modal-content {
            background: var(--surface);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            max-width: 500px;
            width: 90%;
            box-shadow: var(--shadow-elevated);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .modal.active .modal-content {
            transform: scale(1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-lg);
        }

        .modal-title {
            font-size: 1.5rem;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-secondary);
        }

        .login-form {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }

        .form-input {
            padding: var(--spacing-md);
            border: 2px solid var(--border);
            border-radius: var(--radius);
            font-size: 1rem;
            transition: border-color 0.2s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Floating Icons Animation */
        .floating-icons {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 1;
        }

        .floating-icon {
            position: absolute;
            font-size: 1.5rem;
            opacity: 0.7;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(10px, 15px) rotate(5deg); }
            50% { transform: translate(20px, 5px) rotate(0deg); }
            75% { transform: translate(10px, -5px) rotate(-5deg); }
            100% { transform: translate(0, 0) rotate(0deg); }
        }

        /* Fallbeispiel Styles */
        .case-study {
            background: var(--primary-light);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            margin: var(--spacing-lg) 0;
            border-left: 4px solid var(--primary);
        }

        .problem-selection {
            display: grid;
            gap: var(--spacing-md);
            margin: var(--spacing-lg) 0;
        }

        .problem-option {
            background: var(--surface);
            border: 2px solid var(--border);
            border-radius: var(--radius);
            padding: var(--spacing-md);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .problem-option.selected {
            border-color: var(--success);
            background: rgba(76, 201, 240, 0.1);
        }

        .smart-goals {
            background: #fff9e6;
            border-radius: var(--radius);
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
            border-left: 4px solid var(--warning);
        }

        .goal-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            margin: var(--spacing-sm) 0;
        }

        .measures-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-md);
            margin: var(--spacing-lg) 0;
        }

        .measure-card {
            background: var(--surface);
            border: 2px solid var(--border);
            border-radius: var(--radius);
            padding: var(--spacing-md);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .measure-card.selected {
            border-color: var(--success);
            background: rgba(76, 201, 240, 0.1);
        }

        /* Module Completion Celebration */
        .module-complete {
            text-align: center;
            padding: var(--spacing-xl);
            background: linear-gradient(135deg, var(--success) 0%, #3ab0d9 100%);
            color: white;
            border-radius: var(--radius-lg);
            margin: var(--spacing-lg) 0;
        }

        /* Text Center Utility */
        .text-center {
            text-align: center;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes correctFlash {
            0% { background-color: var(--surface); }
            50% { background-color: rgba(76, 201, 240, 0.2); }
            100% { background-color: var(--surface); }
        }

        @keyframes incorrectFlash {
            0% { background-color: var(--surface); }
            50% { background-color: rgba(230, 57, 70, 0.2); }
            100% { background-color: var(--surface); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        @keyframes celebrate {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes fall {
            0% { transform: translateY(-20px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        .correct-flash {
            animation: correctFlash 0.5s ease;
        }

        .incorrect-flash {
            animation: incorrectFlash 0.5s ease, shake 0.5s ease;
        }

        .celebrate {
            animation: celebrate 0.5s ease 3;
        }

        /* Confetti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: var(--accent);
            opacity: 0;
            z-index: 1000;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: var(--spacing-sm);
            }

            .user-stats {
                width: 100%;
                justify-content: space-between;
            }

            .path-container {
                grid-template-columns: 1fr;
            }

            .module-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .navigation {
                flex-direction: column;
                gap: var(--spacing-md);
            }

            .nav-btn {
                width: 100%;
                justify-content: center;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .stat-item {
                padding: 4px 8px;
                font-size: 0.75rem;
            }
        }

        @media (max-width: 480px) {
            .user-stats {
                gap: 4px;
            }

            .stat-item {
                padding: 3px 6px;
                font-size: 0.7rem;
            }

            .stat-item i {
                font-size: 0.7rem;
            }
        }


        /* Navigation Styles */
.main-nav {
    display: flex;
    align-items: center;
}

.nav-links {
    display: flex;
    list-style: none;
    gap: var(--spacing-lg);
    margin: 0;
    padding: 0;
}

.nav-link {
    text-decoration: none;
    color: var(--text-primary);
    font-weight: 600;
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--radius);
    transition: all 0.3s ease;
    position: relative;
}

.nav-link:hover {
    color: var(--primary);
    background: var(--primary-light);
}

.nav-link.active {
    color: var(--primary);
    background: var(--primary-light);
}

.nav-link.active::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 4px;
    height: 4px;
    background: var(--primary);
    border-radius: 50%;
}

/* Mobile Navigation */
.nav-toggle {
    display: none;
    background: none;
    border: none;
    font-size: 1.5rem;
    color: var(--text-primary);
    cursor: pointer;
    padding: var(--spacing-xs);
    z-index: 1001;
}

@media (max-width: 768px) {
    .nav-toggle {
        display: block;
    }
    
    .main-nav {
        position: fixed;
        top: 0;
        right: -100%;
        width: 280px;
        height: 100vh;
        background: var(--surface);
        box-shadow: var(--shadow-elevated);
        flex-direction: column;
        padding: var(--spacing-xl) var(--spacing-lg);
        transition: right 0.3s ease;
        z-index: 1000;
    }
    
    .main-nav.active {
        right: 0;
    }
    
    .nav-links {
        flex-direction: column;
        width: 100%;
        gap: var(--spacing-sm);
        margin-top: var(--spacing-xl);
    }
    
    .nav-link {
        padding: var(--spacing-md);
        text-align: left;
        border: 1px solid var(--border);
        display: block;
    }

    /* Overlay for mobile menu */
    .nav-overlay {
        display: none;
        position: left;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
    }
    
    .nav-overlay.active {
        display: block;
    }
}
        /* Mobile Navigation */
.nav-toggle {
    display: none;
    background: none;
    border: none;
    font-size: 1.5rem;
    color: var(--text-primary);
    cursor: pointer;
    padding: var(--spacing-xs);
    z-index: 1001;
    margin-left: auto; /* This pushes it to the right */
}

@media (max-width: 768px) {
    .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-direction: row; /* Ensure horizontal layout */
    }

    .nav-toggle {
        display: block;
        order: 2; /* Force to the end */
        margin-left: auto; /* Push to far right */
    }

    .logo {
        order: 1; /* Keep logo on left */
        flex-shrink: 0; /* Prevent logo from shrinking */
    }

    .user-stats {
        display: none !important; /* Completely hide on mobile */
    }

    .main-nav {
        position: fixed;
        top: 0;
        right: -100%;
        width: 280px;
        height: 100vh;
        background: var(--surface);
        box-shadow: var(--shadow-elevated);
        flex-direction: column;
        padding: var(--spacing-xl) var(--spacing-lg);
        transition: right 0.3s ease;
        z-index: 1000;
    }
    
    .main-nav.active {
        right: 0;
    }
    
    .nav-links {
        flex-direction: column;
        width: 100%;
        gap: var(--spacing-sm);
        margin-top: var(--spacing-xl);
    }
    
    .nav-link {
        padding: var(--spacing-md);
        text-align: left;
        border: 1px solid var(--border);
        display: block;
    }
}

/* For very small screens, make logo text smaller */
@media (max-width: 480px) {
    .logo span {
        font-size: 1.1rem;
    }
    
    .logo-icon {
        width: 32px !important;
        height: 32px !important;
        font-size: 1rem !important;
    }
}


/* ===== MOBILE NAVIGATION STYLES ===== */
.mobile-nav-container {
    display: none;
}

.mobile-nav-toggle {
    display: none;
    background: transparent;
    border: none;
    color: white;
    font-size: 1.5rem;
    cursor: pointer;
    padding: 10px;
    z-index: 1001;
}

.mobile-nav-menu {
    position: fixed;
    top: 0;
    left: -100%;
    width: 80%;
    height: 100vh;
    background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
    padding: 80px 30px 30px;
    transition: left 0.3s ease;
    z-index: 1000;
    box-shadow: 5px 0 25px rgba(0,0,0,0.3);
}

.mobile-nav-menu.active {
    left: 0;
}

.mobile-nav-item {
    margin-bottom: 20px;
}

.mobile-nav-link {
    display: flex;
    align-items: center;
    gap: 15px;
    color: white;
    text-decoration: none;
    font-weight: 600;
    font-size: 1.1rem;
    padding: 15px 20px;
    border-radius: 12px;
    transition: all 0.3s ease;
    background: rgba(255,255,255,0.1);
}

.mobile-nav-link:hover,
.mobile-nav-link.active {
    background: rgba(255,255,255,0.2);
    transform: translateX(10px);
}

.mobile-nav-link i {
    font-size: 1.2rem;
    width: 25px;
    text-align: center;
}

.mobile-nav-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    z-index: 999;
}

.mobile-nav-overlay.active {
    display: block;
}

/* Hero Section Navigation Buttons */
.hero-nav-buttons {
    display: none;
    justify-content: center;
    gap: 15px;
    margin-top: 30px;
    flex-wrap: wrap;
}

.hero-nav-btn {
    display: flex;
    align-items: center;
    gap: 10px;
    background: rgba(255,255,255,0.15);
    color: white;
    text-decoration: none;
    padding: 12px 20px;
    border-radius: 25px;
    font-weight: 600;
    font-size: 0.9rem;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.2);
}

.hero-nav-btn:hover {
    background: rgba(255,255,255,0.25);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

.hero-nav-btn i {
    font-size: 1rem;
}

/* ===== RESPONSIVE DESIGN ===== */
@media (max-width: 768px) {
    /* Hide desktop nav on mobile */
    .navbar {
        display: none;
    }
    
    /* Show mobile nav toggle */
    .mobile-nav-toggle {
        display: block;
    }
    
    /* Show hero navigation buttons */
    .hero-nav-buttons {
        display: flex;
    }
    
    /* Adjust header for mobile */
    .header-content {
        padding: 10px 0;
    }
    
    .user-stats {
        gap: 8px;
    }
    
    .stat-item {
        padding: 4px 8px;
        font-size: 0.8rem;
    }
}

@media (max-width: 480px) {
    .hero-nav-buttons {
        flex-direction: column;
        align-items: center;
    }
    
    .hero-nav-btn {
        width: 200px;
        justify-content: center;
    }
    
    .mobile-nav-menu {
        width: 85%;
    }
}
        
    </style>
</head>
<body>
    <!-- Login Modal -->
    <div class="modal active" id="login-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Prüfungsvorbereitung</h3>
            </div>
            <p style="text-align: center; margin-bottom: var(--spacing-lg); font-size: 1.1rem;">
                <strong>Willkommen bei Prüfungsvorbereitung!</strong>!</strong>
            </p>
            <form class="login-form" id="login-form">
                <input type="text" class="form-input" id="username" placeholder="Benutzername" required minlength="3">
                <input type="password" class="form-input" id="password" placeholder="Passwort" required minlength="4">
                <button type="submit" class="cta-button" style="width: 100%;">
                    <i class="fas fa-play"></i>
                    Los legen!
                </button>
            </form>
            <p style="text-align: center; margin-top: var(--spacing-md); font-size: 0.9rem; color: var(--text-secondary);">
                Dein Fortschritt wird lokal gespeichert
            </p>
        </div>
    </div>

    <!-- Header 
    <header class="header" style="display: none;">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-star-of-life"></i>
                    </div>
                    <span>PflegefachProfi</span>
                </div>
                <div class="user-stats">
                    <div class="stat-item coins">
                        <i class="fas fa-coins"></i>
                        <span id="coin-count">0</span>
                    </div>
                    <div class="stat-item level">
                        <i class="fas fa-level-up-alt"></i>
                        <span>Level <span id="level-count">1</span></span>
                    </div>
                    <div class="stat-item xp">
                        <i class="fas fa-fire"></i>
                        <span id="xp-count">0</span> XP
                    </div>
                </div>
            </div>
        </div>
    </header>-->
    <!-- Header with Navigation -->
<header class="header" style="display: none;">
    <div class="container">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-star-of-life"></i>
                </div>
                <span>PflegefachProfi</span>
            </div>
            
            <!-- Mobile Menu Toggle -->
            <button class="nav-toggle" id="nav-toggle">
                <i class="fas fa-bars"></i>
            </button>
            
            <nav class="main-nav" id="main-nav">
                <ul class="nav-links">
                    <li><a href="#learning-path" class="nav-link active" data-section="home">Home</a></li>
                    <li><a href="#learning-path" class="nav-link" data-section="learning-path">Lernpfad</a></li>
                  <!--  <li><a href="#" class="nav-link" id="progress-link">Fortschritt</a></li>
                    <li><a href="#" class="nav-link" id="achievements-link">Erfolge</a></li>-->
                </ul>
            </nav>
            
            <div class="user-stats">
                <div class="stat-item coins">
                    <i class="fas fa-coins"></i>
                    <span id="coin-count">0</span>
                </div>
                <div class="stat-item level">
                    <i class="fas fa-level-up-alt"></i>
                    <span>Level <span id="level-count">1</span></span>
                </div>
                <div class="stat-item xp">
                    <i class="fas fa-fire"></i>
                    <span id="xp-count">0</span> XP
                </div>
            </div>
        </div>
    </div>
</header>

    <!-- Hero Section -->
    <section class="hero" style="display: none;">
        <div class="hero-nav-buttons">
    <a href="about.html" class="hero-nav-btn">
        <i class="fas fa-info-circle"></i>
        About Us
    </a>
    <a href="deutsch-lernen.html" class="hero-nav-btn">
        <i class="fas fa-language"></i>
        Deutsch Lernen
    </a>
    <a href="erkrankungen.html" class="hero-nav-btn">
        <i class="fas fa-heartbeat"></i>
        Erkrankungen
    </a>
        </div>
        <div class="floating-icons" id="floating-icons"></div>
        <div class="container">
            <div class="hero-content">
                <h1>Prüfungsvorbereitung</h1>
                <p>Wenn du Pflegeplanung meisterst, hast du schon 40% der Prüfungspunkte! Lerne spielerisch und werde zum PflegefachProfi.</p>
                <a href="#learning-path" class="cta-button">
                    <i class="fas fa-play"></i>
                    Los legen!
                </a>
            </div>
        </div>
    </section>

    <!-- Learning Path -->
    <section class="learning-path" id="learning-path" style="display: none;">
        <div class="container">
            <h2 class="text-center">Dein Lernpfad zur Pflegeplanung</h2>
            <p class="text-center">Meistere die Pflegeplanung Schritt für Schritt. Verdiene Coins durch Lernen und Quizze!</p>

            <div class="path-container" id="module-container">
                <!-- Modules will be dynamically generated -->
            </div>
        </div>
    </section>

    <!-- Learning Module -->
    <section class="learning-module" id="learning-module">
        <div class="container">
            <div class="module-header">
                <h2 id="module-title">Lade Modul...</h2>
                <div class="module-progress">
                    <div class="module-steps" id="module-steps">
                        <!-- Steps will be dynamically generated -->
                    </div>
                    <span id="step-counter">Schritt 1 von X</span>
                </div>
            </div>

            <div class="lesson-content">
                <div id="lesson-container">
                    <!-- Lessons will be dynamically loaded here -->
                </div>
            </div>
        </div>
    </section>

    <script>
        // ==================== MODULE CONFIGURATION ====================
        const MODULES = [
            {
                id: 1,
                title: "Pflegeplanung Basics",
                description: "Grundlagen des Pflegeprozesses und warum Pflegeplanung wichtig ist",
                cost: 0,
                coins: 50,
                xp: 100,
                lessons: 4,
                duration: "15 min",
                icon: "fas fa-book-medical",
                content: [
                    {
                        title: "Was ist Pflegeplanung?",
                        icon: "fas fa-question-circle",
                        content: `
                            <p>Die <strong>Pflegeplanung</strong> ist der systematische Prozess, bei dem Pflegefachpersonen:</p>
                            <ul style="margin-left: var(--spacing-lg); margin-bottom: var(--spacing-md);">
                                <li>Pflegeprobleme identifizieren und analysieren</li>
                                <li>Pflegeziele festlegen</li>
                                <li>Maßnahmen planen und durchführen</li>
                                <li>Ergebnisse evaluieren und anpassen</li>
                            </ul>
                            <div class="key-point">
                                <i class="fas fa-lightbulb"></i>
                                <strong>Warum ist das wichtig?</strong>
                                <p>Eine gute Pflegeplanung sichert qualitativ hochwertige, individuelle Pflege und ist für 40% der Prüfungspunkte relevant!</p>
                            </div>
                        `
                    },
                    {
                        title: "Der Pflegeprozess",
                        icon: "fas fa-sync-alt",
                        content: `
                            <p>Der Pflegeprozess folgt diesen 6 Phasen:</p>
                            <div class="key-point">
                                <i class="fas fa-1"></i>
                                <strong>Informationssammlung</strong>
                                <p>Daten über den Patienten erheben (Anamnese, Assessment)</p>
                            </div>
                            <div class="key-point">
                                <i class="fas fa-2"></i>
                                <strong>Problemanalyse</strong>
                                <p>Pflegeprobleme und Ressourcen identifizieren</p>
                            </div>
                            <div class="key-point">
                                <i class="fas fa-3"></i>
                                <strong>Zielformulierung</strong>
                                <p>SMART-Ziele für die Pflege festlegen</p>
                            </div>
                            <div class="key-point">
                                <i class="fas fa-4"></i>
                                <strong>Maßnahmenplanung</strong>
                                <p>Konkrete Pflegemaßnahmen planen</p>
                            </div>
                            <div class="key-point">
                                <i class="fas fa-5"></i>
                                <strong>Durchführung</strong>
                                <p>Geplante Maßnahmen umsetzen</p>
                            </div>
                            <div class="key-point">
                                <i class="fas fa-6"></i>
                                <strong>Evaluation</strong>
                                <p>Ergebnisse überprüfen und planen anpassen</p>
                            </div>
                        `
                    },
                    {
                        title: "Rechtliche Grundlagen",
                        icon: "fas fa-gavel",
                        content: `
                            <p>Die Pflegeplanung ist gesetzlich verankert:</p>
                            <div class="key-point">
                                <i class="fas fa-scale-balanced"></i>
                                <strong>SGB V & XI</strong>
                                <p>Pflicht zur Dokumentation der Pflege</p>
                            </div>
                            <div class="key-point">
                                <i class="fas fa-file-contract"></i>
                                <strong>Berufsrecht</strong>
                                <p>Pflegeberufegesetz verpflichtet zu professioneller Dokumentation</p>
                            </div>
                            <div class="example-box">
                                <div class="example-title">Merksatz:</div>
                                <p><strong>"Was nicht dokumentiert ist, ist nicht gemacht!"</strong></p>
                                <p>Die Dokumentation dient als Nachweis der geleisteten Pflege.</p>
                            </div>
                        `
                    },
                    {
                        title: "Quiz: Basics",
                        icon: "fas fa-brain",
                        content: "quiz",
                        quiz: [
                            {
                                question: "Was ist der Hauptzweck der Pflegeplanung?",
                                options: [
                                    { text: "Zeit für die Pflegekraft zu sparen", correct: false },
                                    { text: "Systematische, individuelle Pflege zu gewährleisten", correct: true },
                                    { text: "Möglichst viele Dokumente zu erstellen", correct: false },
                                    { text: "Den Arzt zu entlasten", correct: false }
                                ],
                                explanation: "Richtig! Die Pflegeplanung sichert qualitativ hochwertige, individuelle Pflege für jeden Patienten."
                            },
                            {
                                question: "Wie viele Phasen hat der Pflegeprozess?",
                                options: [
                                    { text: "4 Phasen", correct: false },
                                    { text: "6 Phasen", correct: true },
                                    { text: "8 Phasen", correct: false },
                                    { text: "3 Phasen", correct: false }
                                ],
                                explanation: "Korrekt! Der Pflegeprozess umfasst 6 Phasen von der Informationssammlung bis zur Evaluation."
                            },
                            {
                                question: "Warum ist die Pflegeplanung für die Prüfung so wichtig?",
                                options: [
                                    { text: "Sie bringt 40% der Prüfungspunkte", correct: true },
                                    { text: "Sie ist die einfachste Prüfungsaufgabe", correct: false },
                                    { text: "Sie wird vom Lehrer besonders geliebt", correct: false },
                                    { text: "Sie ist gesetzlich vorgeschrieben", correct: false }
                                ],
                                explanation: "Genau! Die Pflegeplanung macht etwa 40% der Prüfungspunkte aus - ein absolutes Muss für die Prüfung!"
                            }
                        ]
                    }
                ]
            },
            {
                id: 2,
                title: "Pflegeprobleme identifizieren",
                description: "Lerne, was ein echtes Pflegeproblem ist und was nicht",
                cost: 50,
                coins: 75,
                xp: 150,
                lessons: 4,
                duration: "20 min",
                icon: "fas fa-search",
                content: [
                    {
                        title: "Was ist ein Pflegeproblem?",
                        icon: "fas fa-stethoscope",
                        content: `
                            <p>Ein <strong>Pflegeproblem</strong> ist ein gesundheitsbezogenes Problem, das die Pflegefachperson eigenständig erkennen, behandeln und überwachen kann.</p>
                            <div class="key-point">
                                <i class="fas fa-check-circle"></i>
                                <strong>Merkmale eines Pflegeproblems:</strong>
                                <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-xs);">
                                    <li>Beeinträchtigt die Lebensqualität des Patienten</li>
                                    <li>Kann durch pflegerische Maßnahmen gelöst/verbessert werden</li>
                                    <li>Bezieht sich auf AEDL/ATL-Bereiche</li>
                                    <li>Ist keine ärztliche Diagnose</li>
                                </ul>
                            </div>
                            <div class="example-box">
                                <div class="example-title">Beispiele:</div>
                                <p><strong>Richtige Pflegeprobleme:</strong> Schlafstörung, Schmerzen, Dekubitusgefahr, Ernährungsdefizit</p>
                                <p><strong>Keine Pflegeprobleme:</strong> Diabetes mellitus, Herzinsuffizienz (ärztliche Diagnosen)</p>
                            </div>
                        `
                    },
                    {
                        title: "AEDL/ATL Modell",
                        icon: "fas fa-puzzle-piece",
                        content: `
                            <p>Pflegeprobleme werden nach <strong>AEDL</strong> (Aktivitäten und existenzielle Erfahrungen des Lebens) oder <strong>ATL</strong> (Aktivitäten des täglichen Lebens) kategorisiert:</p>
                            <div class="interactive-element">
                                <h4>Die 13 AEDL-Bereiche:</h4>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-sm); margin-top: var(--spacing-md);">
                                    <div style="background: var(--primary-light); padding: var(--spacing-sm); border-radius: var(--radius); text-align: center;">
                                        <strong>Kommunizieren</strong>
                                    </div>
                                    <div style="background: var(--primary-light); padding: var(--spacing-sm); border-radius: var(--radius); text-align: center;">
                                        <strong>Sich bewegen</strong>
                                    </div>
                                    <div style="background: var(--primary-light); padding: var(--spacing-sm); border-radius: var(--radius); text-align: center;">
                                        <strong>Vitale Funktionen</strong>
                                    </div>
                                    <div style="background: var(--primary-light); padding: var(--spacing-sm); border-radius: var(--radius); text-align: center;">
                                        <strong>Sich pflegen</strong>
                                    </div>
                                    <div style="background: var(--primary-light); padding: var(--spacing-sm); border-radius: var(--radius); text-align: center;">
                                        <strong>Essen & Trinken</strong>
                                    </div>
                                    <div style="background: var(--primary-light); padding: var(--spacing-sm); border-radius: var(--radius); text-align: center;">
                                        <strong>Ausscheiden</strong>
                                    </div>
                                    <div style="background: var(--primary-light); padding: var(--spacing-sm); border-radius: var(--radius); text-align: center;">
                                        <strong>Sich kleiden</strong>
                                    </div>
                                    <div style="background: var(--primary-light); padding: var(--spacing-sm); border-radius: var(--radius); text-align: center;">
                                        <strong>Ruhen & Schlafen</strong>
                                    </div>
                                    <div style="background: var(--primary-light); padding: var(--spacing-sm); border-radius: var(--radius); text-align: center;">
                                        <strong>Beschäftigen</strong>
                                    </div>
                                    <div style="background: var(--primary-light); padding: var(--spacing-sm); border-radius: var(--radius); text-align: center;">
                                        <strong>Sich als Mann/Frau fühlen</strong>
                                    </div>
                                    <div style="background: var(--primary-light); padding: var(--spacing-sm); border-radius: var(--radius); text-align: center;">
                                        <strong>Sorgen für Sicherheit</strong>
                                    </div>
                                    <div style="background: var(--primary-light); padding: var(--spacing-sm); border-radius: var(--radius); text-align: center;">
                                        <strong>Soziale Bereiche</strong>
                                    </div>
                                    <div style="background: var(--primary-light); padding: var(--spacing-sm); border-radius: var(--radius); text-align: center;">
                                        <strong>Mit Existenz. umgehen</strong>
                                    </div>
                                </div>
                            </div>
                            <div class="key-point">
                                <i class="fas fa-tip"></i>
                                <strong>Tipp:</strong>
                                <p>Jedes Pflegeproblem sollte einem AEDL-Bereich zugeordnet werden können!</p>
                            </div>
                        `
                    },
                    {
                        title: "Häufige Fehler",
                        icon: "fas fa-exclamation-triangle",
                        content: `
                            <p>Vermeide diese häufigen Fehler bei der Problemidentifikation:</p>
                            <div class="key-point">
                                <i class="fas fa-times"></i>
                                <strong>Ärztliche Diagnosen als Pflegeprobleme</strong>
                                <p><strong>Falsch:</strong> "Patient hat Diabetes"<br>
                                   <strong>Richtig:</strong> "Wissensdefizit bezüglich Blutzuckerkontrolle"</p>
                            </div>
                            <div class="key-point">
                                <i class="fas fa-times"></i>
                                <strong>Wertende Formulierungen</strong>
                                <p><strong>Falsch:</strong> "Patient ist unkooperativ"<br>
                                   <strong>Richtig:</strong> "Non-Compliance bezüglich Medikamenteneinnahme"</p>
                            </div>
                            <div class="key-point">
                                <i class="fas fa-times"></i>
                                <strong>Pflegemaßnahmen als Probleme</strong>
                                <p><strong>Falsch:</strong> "Patient benötigt Wundversorgung"<br>
                                   <strong>Richtig:</strong> "Hautläsion am Sakralbereich"</p>
                            </div>
                            <div class="interactive-element">
                                <h4>Übung: Erkenne das Pflegeproblem!</h4>
                                <p><strong>Situation:</strong> Herr Müller (78) ist nach Hüft-OP immobil, isst wenig und trinkt nur 500ml/Tag.</p>
                                <p style="margin-top: var(--spacing-sm);"><strong>Welches ist das richtige Pflegeproblem?</strong></p>
                                <div style="background: #e8f5e8; padding: var(--spacing-md); border-radius: var(--radius); margin-top: var(--spacing-sm); border-left: 4px solid var(--success);">
                                    <strong>Richtig:</strong> "Dekubitusgefahr aufgrund von Immobilität und Mangelernährung"
                                </div>
                            </div>
                        `
                    },
                    {
                        title: "Quiz: Pflegeprobleme",
                        icon: "fas fa-brain",
                        content: "quiz",
                        quiz: [
                            {
                                question: '"Schlafstörung aufgrund von Schmerzen" - Ist dies ein Pflegeproblem?',
                                options: [
                                    { text: 'Ja, es folgt der PESR-Struktur', correct: true },
                                    { text: 'Nein, Schmerzen sind eine ärztliche Diagnose', correct: false }
                                ],
                                explanation: 'Korrekt! Dies ist ein authentisches Pflegeproblem. Schmerzmanagement ist eine eigenständige pflegerische Aufgabe.'
                            },
                            {
                                question: '"Diabetes mellitus mit erhöhten Blutzuckerwerten" - Ist dies ein Pflegeproblem?',
                                options: [
                                    { text: 'Ja, die Pflege kümmert sich um Diabetiker', correct: false },
                                    { text: 'Nein, das ist eine ärztliche Diagnose', correct: true }
                                ],
                                explanation: 'Richtig! Diabetes mellitus ist eine ärztliche Diagnose. Ein Pflegeproblem wäre: "Wissensdefizit bezüglich Blutzuckerkontrolle".'
                            },
                            {
                                question: 'Welche Formulierung ist korrekt?',
                                options: [
                                    { text: '"Patient ist schwierig und unkooperativ"', correct: false },
                                    { text: '"Non-Compliance bezüglich Therapiemaßnahmen"', correct: true },
                                    { text: '"Patient macht extra Arbeit"', correct: false },
                                    { text: '"Patient will nicht"', correct: false }
                                ],
                                explanation: 'Perfekt! "Non-Compliance" ist die fachlich korrekte, wertfreie Formulierung.'
                            }
                        ]
                    }
                ]
            },
            {
                id: 3,
                title: "Ressourcen erkennen",
                description: "Lerne, patienteneigene Stärken und Ressourcen zu identifizieren",
                cost: 75,
                coins: 100,
                xp: 200,
                lessons: 3,
                duration: "18 min",
                icon: "fas fa-hands-helping",
                content: [
                    {
                        title: "Was sind Ressourcen?",
                        icon: "fas fa-seedling",
                        content: `
                            <p><strong>Ressourcen</strong> sind alle Fähigkeiten, Stärken und Möglichkeiten des Patienten, die zur Problemlösung beitragen können.</p>
                            <div class="key-point">
                                <i class="fas fa-categories"></i>
                                <strong>Arten von Ressourcen:</strong>
                                <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-xs);">
                                    <li><strong>Personale Ressourcen:</strong> Motivation, Wissen, Fähigkeiten</li>
                                    <li><strong>Soziale Ressourcen:</strong> Familie, Freunde, Nachbarn</li>
                                    <li><strong>Materielle Ressourcen:</strong> Wohnung, Hilfsmittel, Finanzen</li>
                                    <li><strong>Umgebungsressourcen:</strong> Barrierefreiheit, Nahversorgung</li>
                                </ul>
                            </div>
                            <div class="example-box">
                                <div class="example-title">Beispiel:</div>
                                <p><strong>Patient:</strong> Frau Schmidt (82) mit Arthrose</p>
                                <p><strong>Ressourcen:</strong> 
                                <br>- Tochter wohnt in der Nähe (sozial)
                                <br>- Ist motiviert, mobil zu bleiben (personal)  
                                <br>- Rollator vorhanden (materiell)
                                <br>- Wohnung ebenerdig (Umgebung)</p>
                            </div>
                        `
                    },
                    {
                        title: "Ressourcenorientierte Pflege",
                        icon: "fas fa-search-plus",
                        content: `
                            <p>Die ressourcenorientierte Pflege fokussiert auf das, was der Patient <strong>noch kann</strong>, nicht auf das, was er nicht kann.</p>
                            <div class="key-point">
                                <i class="fas fa-magic"></i>
                                <strong>Vorteile der Ressourcenorientierung:</strong>
                                <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-xs);">
                                    <li>Stärkt die Eigenständigkeit des Patienten</li>
                                    <li>Fördert die Motivation und Compliance</li>
                                    <li>Führt zu realistischerer Pflegeplanung</li>
                                    <li>Entlastet die Pflegekraft</li>
                                </ul>
                            </div>
                            <div class="interactive-element">
                                <h4>Ressourcen-Quiz:</h4>
                                <p><strong>Situation:</strong> Herr Weber (65) nach Schlaganfall mit linksseitiger Lähmung, war früher Lehrer, Ehefrau pflegt mit.</p>
                                <p style="margin-top: var(--spacing-sm);"><strong>Welche Ressourcen hat Herr Weber?</strong></p>
                                <div style="background: #e8f5e8; padding: var(--spacing-md); border-radius: var(--radius); margin-top: var(--spacing-sm);">
                                    <strong>Ressourcen:</strong> Gute kognitive Fähigkeiten (war Lehrer), motivierte Ehefrau, rechtsseitige Beweglichkeit erhalten
                                </div>
                            </div>
                        `
                    },
                    {
                        title: "Quiz: Ressourcen",
                        icon: "fas fa-brain",
                        content: "quiz",
                        quiz: [
                            {
                                question: 'Was sind personale Ressourcen?',
                                options: [
                                    { text: 'Familie und Freunde', correct: false },
                                    { text: 'Motivation und Wissen des Patienten', correct: true },
                                    { text: 'Hilfsmittel und Wohnung', correct: false },
                                    { text: 'Ärztliche Versorgung', correct: false }
                                ],
                                explanation: 'Richtig! Personale Ressourcen sind die inneren Stärken des Patienten wie Motivation, Wissen und Fähigkeiten.'
                            },
                            {
                                question: 'Warum ist Ressourcenorientierung wichtig?',
                                options: [
                                    { text: 'Weil sie die Pflegekraft entlastet', correct: false },
                                    { text: 'Weil sie die Eigenständigkeit fördert', correct: true },
                                    { text: 'Weil sie weniger Dokumentation erfordert', correct: false },
                                    { text: 'Weil sie vom Arzt verlangt wird', correct: false }
                                ],
                                explanation: 'Genau! Die Ressourcenorientierung stärkt die Eigenständigkeit und Motivation des Patienten.'
                            },
                            {
                                question: 'Welche Aussage beschreibt eine soziale Ressource?',
                                options: [
                                    { text: '"Patient kann sich noch selbst waschen"', correct: false },
                                    { text: '"Tochter besucht täglich und unterstützt"', correct: true },
                                    { text: '"Patient hat einen Rollator"', correct: false },
                                    { text: '"Patient ist hochmotiviert"', correct: false }
                                ],
                                explanation: 'Korrekt! Soziale Ressourcen beziehen sich auf das Unterstützungssystem wie Familie, Freunde oder Nachbarn.'
                            }
                        ]
                    }
                ]
            },
            {
                id: 4,
                title: "Fallbeispiel Praxis",
                description: "Komplette Pflegeplanung an realen Fallbeispielen üben",
                cost: 100,
                coins: 150,
                xp: 300,
                lessons: 3,
                duration: "25 min",
                icon: "fas fa-file-medical",
                content: [
                    {
                        title: "Fallbeispiel: Herr Schmidt",
                        icon: "fas fa-user-injured",
                        content: "fallbeispiel",
                        fallbeispiel: {
                            patient: {
                                name: "Herr Karl Schmidt",
                                alter: 78,
                                situation: "Post-OP nach Oberschenkelhalsfraktur, 3 Tage post-OP, mobilisiert langsam mit Gehhilfe"
                            },
                            assessment: [
                                "Schmerzen: 4/10 in Ruhe, 7/10 bei Bewegung",
                                "Trinkmenge: ca. 800ml/Tag",
                                "Mobilität: benötigt Hilfe beim Aufstehen",
                                "Haut: Rötung am Sakrum",
                                "Kognition: zeitlich desorientiert",
                                "Vorerkrankungen: Hypertonie, leichte Demenz",
                                "Soziales: Ehefrau verstorben, lebt allein in 2. OG ohne Aufzug"
                            ],
                            problems: [
                                {
                                    id: 1,
                                    text: "Akute Schmerzen bei Bewegung aufgrund der Fraktur",
                                    correctAnswers: [1, 2, 3, 4]
                                },
                                {
                                    id: 2,
                                    text: "Risiko für Dekubitus aufgrund von Immobilität und Mangelernährung",
                                    correctAnswers: [5, 6, 7, 8]
                                },
                                {
                                    id: 3,
                                    text: "Selbstpflegedefizit in den AEDL-Bereichen Körperpflege und Anziehen",
                                    correctAnswers: [9, 10, 11, 12]
                                },
                                {
                                    id: 4,
                                    text: "Sturzgefahr aufgrund von eingeschränkter Mobilität und Demenz",
                                    correctAnswers: [13, 14, 15, 16]
                                }
                            ],
                            zieleQuestions: [
                                {
                                    problemId: 1,
                                    question: "Welches ist das SMART-Ziel für das Problem 'Akute Schmerzen bei Bewegung'?",
                                    options: [
                                        { id: 1, text: "Schmerzreduktion auf 2/10 bei Bewegung innerhalb von 24 Stunden", correct: true, explanation: "Richtig! Dieses Ziel ist spezifisch, messbar und terminiert." },
                                        { id: 2, text: "Patient soll weniger Schmerzen haben", correct: false, explanation: "Falsch! Dieses Ziel ist nicht messbar und nicht spezifisch genug." },
                                        { id: 3, text: "Schmerzfreiheit innerhalb von 2 Wochen", correct: false, explanation: "Falsch! Bei Frakturen ist Schmerzfreiheit in 2 Wochen oft nicht realistisch." },
                                        { id: 4, text: "Patient soll sich besser fühlen", correct: false, explanation: "Falsch! Zu vage - nicht messbar oder spezifisch." }
                                    ]
                                },
                                {
                                    problemId: 2,
                                    question: "Welches ist das SMART-Ziel für das Problem 'Risiko für Dekubitus'?",
                                    options: [
                                        { id: 5, text: "Hautintegrität am Sakrum bleibt für die Dauer des Aufenthalts erhalten", correct: true, explanation: "Richtig! Präventionsziel mit klarem Zeitrahmen." },
                                        { id: 6, text: "Patient bekommt keinen Dekubitus", correct: false, explanation: "Falsch! Absolutes Vermeiden ist nicht immer realistisch." },
                                        { id: 7, text: "Haut sieht besser aus", correct: false, explanation: "Falsch! Nicht messbar oder spezifisch." },
                                        { id: 8, text: "Dekubitusprophylaxe durchführen", correct: false, explanation: "Falsch! Das ist eine Maßnahme, kein Ziel." }
                                    ]
                                },
                                {
                                    problemId: 3,
                                    question: "Welches ist das SMART-Ziel für das Problem 'Selbstpflegedefizit'?",
                                    options: [
                                        { id: 9, text: "Patient kann sich mit minimaler Hilfe waschen und anziehen", correct: true, explanation: "Richtig! Spezifisch, messbar und realistisch." },
                                        { id: 10, text: "Patient ist komplett selbstständig", correct: false, explanation: "Falsch! Bei Demenz und Fraktur nicht realistisch." },
                                        { id: 11, text: "Patient wird gewaschen", correct: false, explanation: "Falsch! Das ist eine Maßnahme, kein Ziel." },
                                        { id: 12, text: "Bessere Körperpflege", correct: false, explanation: "Falsch! Nicht messbar oder spezifisch." }
                                    ]
                                },
                                {
                                    problemId: 4,
                                    question: "Welches ist das SMART-Ziel für das Problem 'Sturzgefahr'?",
                                    options: [
                                        { id: 13, text: "Keine Stürze während des Klinikaufenthalts", correct: true, explanation: "Richtig! Klar messbares Sicherheitsziel." },
                                        { id: 14, text: "Patient läuft ohne Gehhilfe", correct: false, explanation: "Falsch! Bei Fraktur nicht realistisch und gefährlich." },
                                        { id: 15, text: "Weniger Stürze", correct: false, explanation: "Falsch! Nicht spezifisch genug." },
                                        { id: 16, text: "Patient fällt nicht hin", correct: false, explanation: "Falsch! Absolutes Vermeiden ist schwer garantierbar." }
                                    ]
                                }
                            ],
                            massnahmenQuestions: [
                                {
                                    problemId: 1,
                                    question: "Welche Maßnahmen sind korrekt für 'Akute Schmerzen bei Bewegung'? (Wähle 4)",
                                    options: [
                                        { id: 1, text: "Schmerzmedikation nach Bedarf und planmäßig verabreichen", correct: true, explanation: "Richtig! Medikamentöse Schmerztherapie ist essentiell." },
                                        { id: 2, text: "Lagerung mit Kissen unterstützen", correct: true, explanation: "Richtig! Entlastende Lagerung reduziert Schmerzen." },
                                        { id: 3, text: "Ablenkung durch Gespräche anbieten", correct: true, explanation: "Richtig! Psychologische Schmerzbewältigung." },
                                        { id: 4, text: "Schmerztagebuch führen", correct: true, explanation: "Richtig! Dokumentation für Therapieanpassung." },
                                        { id: 5, text: "Patient soll die Zähne zusammenbeißen", correct: false, explanation: "Falsch! Nicht professionell und empathielos." },
                                        { id: 6, text: "Schmerz ignorieren", correct: false, explanation: "Falsch! Schmerz muss ernst genommen werden." },
                                        { id: 7, text: "Nur nachts Medikamente geben", correct: false, explanation: "Falsch! Schmerztherapie muss bedarfsgerecht sein." },
                                        { id: 8, text: "Bewegung komplett vermeiden", correct: false, explanation: "Falsch! Mobilisation ist wichtig für Heilung." },
                                        { id: 9, text: "Eisbeutel auflegen", correct: false, explanation: "Falsch! Bei Frakturen kann Kühlung kontraindiziert sein." },
                                        { id: 10, text: "Massage der Frakturstelle", correct: false, explanation: "Falsch! Direkte Manipulation der Fraktur gefährlich." }
                                    ]
                                },
                                {
                                    problemId: 2,
                                    question: "Welche Maßnahmen sind korrekt für 'Risiko für Dekubitus'? (Wähle 4)",
                                    options: [
                                        { id: 11, text: "Lagerturnen alle 2 Stunden durchführen", correct: true, explanation: "Richtig! Regelmäßige Druckentlastung." },
                                        { id: 12, text: "Hautkontrolle 2x täglich", correct: true, explanation: "Richtig! Frühzeitige Erkennung von Hautveränderungen." },
                                        { id: 13, text: "Dekubitusmatratze einsetzen", correct: true, explanation: "Richtig! Spezielle Hilfsmittel zur Prophylaxe." },
                                        { id: 14, text: "Hautpflege mit rückfettenden Lotionen", correct: true, explanation: "Richtig! Hautschutz und -pflege." },
                                        { id: 15, text: "Patient stundenlang in einer Position lassen", correct: false, explanation: "Falsch! Erhöht Dekubitusrisiko." },
                                        { id: 16, text: "Haut mit Alkohol desinfizieren", correct: false, explanation: "Falsch! Hautaustrocknung erhöht Risiko." },
                                        { id: 17, text: "Eng anliegende Kleidung verwenden", correct: false, explanation: "Falsch! Kann Druckstellen verursachen." },
                                        { id: 18, text: "Massage der gefährdeten Stellen", correct: false, explanation: "Falsch! Kann bei gefährdeter Haut schädlich sein." },
                                        { id: 19, text: "Patient auf harte Matratze legen", correct: false, explanation: "Falsch! Erhöht den Druck." },
                                        { id: 20, text: "Nasse Wäsche liegen lassen", correct: false, explanation: "Falsch! Mazeration erhöht Dekubitusrisiko." }
                                    ]
                                },
                                {
                                    problemId: 3,
                                    question: "Welche Maßnahmen sind korrekt für 'Selbstpflegedefizit'? (Wähle 4)",
                                    options: [
                                        { id: 21, text: "Waschutensilien in Reichweite platzieren", correct: true, explanation: "Richtig! Unterstützt Selbstständigkeit." },
                                        { id: 22, text: "Anziehhilfen bereitstellen", correct: true, explanation: "Richtig! Kompensatorische Hilfsmittel." },
                                        { id: 23, text: "Zeit für selbstständiges Handeln lassen", correct: true, explanation: "Richtig! Respektiert das Tempo des Patienten." },
                                        { id: 24, text: "Ermutigung und positive Verstärkung", correct: true, explanation: "Richtig! Unterstützt Motivation." },
                                        { id: 25, text: "Patient komplett waschen um Zeit zu sparen", correct: false, explanation: "Falsch! Nimmt Selbstständigkeit." },
                                        { id: 26, text: "Kritik bei langsamer Ausführung", correct: false, explanation: "Falsch! Demotivierend und respektlos." },
                                        { id: 27, text: "Alle Tätigkeiten übernehmen", correct: false, explanation: "Falsch! Fördert Abhängigkeit." },
                                        { id: 28, text: "Unrealistische Erwartungen stellen", correct: false, explanation: "Falsch! Führt zu Frustration." },
                                        { id: 29, text: "Patient alleine lassen", correct: false, explanation: "Falsch! Sicherheitsrisiko bei Demenz." },
                                        { id: 30, text: "Zeitdruck ausüben", correct: false, explanation: "Falsch! Erhöht Stress und Fehlerrisiko." }
                                    ]
                                },
                                {
                                    problemId: 4,
                                    question: "Welche Maßnahmen sind korrekt für 'Sturzgefahr'? (Wähle 4)",
                                    options: [
                                        { id: 31, text: "Gehhilfe immer griffbereit platzieren", correct: true, explanation: "Richtig! Sicherheitsmaßnahme." },
                                        { id: 32, text: "Bett in tiefster Position lassen", correct: true, explanation: "Richtig! Reduziert Sturzhöhe." },
                                        { id: 33, text: "Rufknopf in Reichweite legen", correct: true, explanation: "Richtig! Ermöglicht Hilfeanforderung." },
                                        { id: 34, text: "Gangwege freihalten", correct: true, explanation: "Richtig! Sturzprophylaxe." },
                                        { id: 35, text: "Patient im Bett festbinden", correct: false, explanation: "Falsch! Freiheitseinschränkung, nur in Ausnahmen." },
                                        { id: 36, text: "Gehhilfe wegräumen", correct: false, explanation: "Falsch! Erhöht Sturzrisiko." },
                                        { id: 37, text: "Patient zum schnellen Laufen animieren", correct: false, explanation: "Falsch! Erhöht Sturzrisiko." },
                                        { id: 38, text: "Bett in hoher Position lassen", correct: false, explanation: "Falsch! Erhöht Sturzhöhe." },
                                        { id: 39, text: "Gegenstände auf dem Boden liegen lassen", correct: false, explanation: "Falsch! Stolpergefahr." },
                                        { id: 40, text: "Patient alleine auf Toilette gehen lassen", correct: false, explanation: "Falsch! Bei Sturzgefahr Begleitung nötig." }
                                    ]
                                }
                            ]
                        }
                    },
                    {
                        title: "Fallbeispiel: Frau Meyer",
                        icon: "fas fa-female",
                        content: "fallbeispiel",
                        fallbeispiel: {
                            patient: {
                                name: "Frau Anna Meyer",
                                alter: 85,
                                situation: "Parkinson-Erkrankung, zunehmende Immobilität, lebt im Pflegeheim"
                            },
                            assessment: [
                                "Tremor in Ruhe, besonders an Händen",
                                "Gehstrecke: max. 10 Meter mit Rollator",
                                "Schluckbeschwerden, häufiges Verschlucken",
                                "Gewichtsverlust: 5kg in 3 Monaten",
                                "Depressive Verstimmung, wenig Interaktion",
                                "Inkontinenz für Urin, benötigt Vorlagen"
                            ],
                            problems: [
                                {
                                    id: 1,
                                    text: "Eingeschränkte Mobilität durch Parkinson-Symptomatik",
                                    correctAnswers: [1, 2, 3, 4]
                                },
                                {
                                    id: 2,
                                    text: "Schluckstörung mit Aspirationsgefahr",
                                    correctAnswers: [5, 6, 7, 8]
                                },
                                {
                                    id: 3,
                                    text: "Mangelernährung und ungewollter Gewichtsverlust",
                                    correctAnswers: [9, 10, 11, 12]
                                },
                                {
                                    id: 4,
                                    text: "Soziale Isolation und depressive Verstimmung",
                                    correctAnswers: [13, 14, 15, 16]
                                }
                            ],
                            zieleQuestions: [
                                {
                                    problemId: 1,
                                    question: "Welches ist das SMART-Ziel für 'Eingeschränkte Mobilität'?",
                                    options: [
                                        { id: 1, text: "Mobilisation 2x täglich für 10 Meter mit Rollator", correct: true, explanation: "Richtig! Spezifisch, messbar und realistisch." },
                                        { id: 2, text: "Besser laufen können", correct: false, explanation: "Falsch! Nicht messbar oder spezifisch." },
                                        { id: 3, text: "Komplette Selbstständigkeit", correct: false, explanation: "Falsch! Bei Parkinson nicht realistisch." },
                                        { id: 4, text: "Nur noch im Rollstuhl sitzen", correct: false, explanation: "Falsch! Zu restriktiv, Mobilität erhalten wichtig." }
                                    ]
                                },
                                {
                                    problemId: 2,
                                    question: "Welches ist das SMART-Ziel für 'Schluckstörung mit Aspirationsgefahr'?",
                                    options: [
                                        { id: 5, text: "Keine Aspirationspneumonie während des Aufenthalts", correct: true, explanation: "Richtig! Klare Sicherheitszielsetzung." },
                                        { id: 6, text: "Patient schluckt normal", correct: false, explanation: "Falsch! Bei Parkinson nicht realistisch." },
                                        { id: 7, text: "Nur noch flüssige Nahrung", correct: false, explanation: "Falsch! Zu restriktiv, keine Zielformulierung." },
                                        { id: 8, text: "Weniger Verschlucken", correct: false, explanation: "Falsch! Nicht spezifisch messbar." }
                                    ]
                                },
                                {
                                    problemId: 3,
                                    question: "Welches ist das SMART-Ziel für 'Mangelernährung'?",
                                    options: [
                                        { id: 9, text: "Gewichtsstabilisierung innerhalb von 4 Wochen", correct: true, explanation: "Richtig! Messbar und terminiert." },
                                        { id: 10, text: "Patient isst mehr", correct: false, explanation: "Falsch! Nicht spezifisch genug." },
                                        { id: 11, text: "Idealgewicht erreichen", correct: false, explanation: "Falsch! Bei 85 Jahren oft nicht realistisch." },
                                        { id: 12, text: "Nur hochkalorische Nahrung", correct: false, explanation: "Falsch! Das ist eine Maßnahme, kein Ziel." }
                                    ]
                                },
                                {
                                    problemId: 4,
                                    question: "Welches ist das SMART-Ziel für 'Soziale Isolation'?",
                                    options: [
                                        { id: 13, text: "Tägliche soziale Interaktion für mindestens 30 Minuten", correct: true, explanation: "Richtig! Spezifisch und messbar." },
                                        { id: 14, text: "Patient ist glücklich", correct: false, explanation: "Falsch! Nicht messbar." },
                                        { id: 15, text: "Mehr Besuch bekommen", correct: false, explanation: "Falsch! Nicht beeinflussbar durch Pflege." },
                                        { id: 16, text: "Depression heilen", correct: false, explanation: "Falsch! Medizinische Diagnose, kein Pflegeziel." }
                                    ]
                                }
                            ],
                            massnahmenQuestions: [
                                {
                                    problemId: 1,
                                    question: "Welche Maßnahmen sind korrekt für 'Eingeschränkte Mobilität'? (Wähle 4)",
                                    options: [
                                        { id: 1, text: "Mobilisation mit 2 Personen durchführen", correct: true, explanation: "Richtig! Sicherheit bei Parkinson." },
                                        { id: 2, text: "Krankengymnastik verordnen", correct: true, explanation: "Richtig! Professionelle Therapie." },
                                        { id: 3, text: "Gehtraining mit Rollator", correct: true, explanation: "Richtig! Erhalt der Mobilität." },
                                        { id: 4, text: "Sturzprophylaxe durchführen", correct: true, explanation: "Richtig! Wichtige Sicherheitsmaßnahme." },
                                        { id: 5, text: "Patient im Bett festhalten", correct: false, explanation: "Falsch! Freiheitseinschränkend." },
                                        { id: 6, text: "Bewegung vermeiden", correct: false, explanation: "Falsch! Führt zu weiteren Einschränkungen." },
                                        { id: 7, text: "Schnelles Gehen fördern", correct: false, explanation: "Falsch! Erhöht Sturzrisiko bei Parkinson." },
                                        { id: 8, text: "Ohne Hilfsmittel gehen lassen", correct: false, explanation: "Falsch! Sicherheitsrisiko." },
                                        { id: 9, text: "Treppensteigen üben", correct: false, explanation: "Falsch! Zu gefährlich bei fortgeschrittenem Parkinson." },
                                        { id: 10, text: "Patient alleine lassen", correct: false, explanation: "Falsch! Sicherheitsrisiko." }
                                    ]
                                },
                                {
                                    problemId: 2,
                                    question: "Welche Maßnahmen sind korrekt für 'Schluckstörung'? (Wähle 4)",
                                    options: [
                                        { id: 11, text: "Angedickte Flüssigkeiten anbieten", correct: true, explanation: "Richtig! Reduziert Aspirationsrisiko." },
                                        { id: 12, text: "Aufrechte Sitzposition während der Mahlzeiten", correct: true, explanation: "Richtig! Physiologische Schluckposition." },
                                        { id: 13, text: "Kleine Bissen und Schlucke", correct: true, explanation: "Richtig! Erleichtert den Schluckvorgang." },
                                        { id: 14, text: "Ausreichend Zeit für Mahlzeiten lassen", correct: true, explanation: "Richtig! Reduziert Stress." },
                                        { id: 15, text: "Große Portionen auf einmal", correct: false, explanation: "Falsch! Erhöht Aspirationsrisiko." },
                                        { id: 16, text: "Im Liegen essen und trinken", correct: false, explanation: "Falsch! Erhöht Aspirationsrisiko." },
                                        { id: 17, text: "Eile bei Mahlzeiten", correct: false, explanation: "Falsch! Erhöht Verschluckungsgefahr." },
                                        { id: 18, text: "Wässrige Flüssigkeiten", correct: false, explanation: "Falsch! Erhöht Aspirationsrisiko." },
                                        { id: 19, text: "Trockene Speisen bevorzugen", correct: false, explanation: "Falsch! Erschwert das Schlucken." },
                                        { id: 20, text: "Patient zum schnellen Essen drängen", correct: false, explanation: "Falsch! Gefährlich bei Schluckstörung." }
                                    ]
                                },
                                {
                                    problemId: 3,
                                    question: "Welche Maßnahmen sind korrekt für 'Mangelernährung'? (Wähle 4)",
                                    options: [
                                        { id: 21, text: "Hochkalorische, weiche Kost anbieten", correct: true, explanation: "Richtig! Energiereich und schluckfreundlich." },
                                        { id: 22, text: "Wöchentliche Gewichtskontrollen", correct: true, explanation: "Richtig! Objektive Verlaufskontrolle." },
                                        { id: 23, text: "Mehrere kleine Mahlzeiten", correct: true, explanation: "Richtig! Besser verträglich." },
                                        { id: 24, text: "Attraktive Präsentation der Speisen", correct: true, explanation: "Richtig! Steigert die Akzeptanz." },
                                        { id: 25, text: "Essen erzwingen", correct: false, explanation: "Falsch! Respektlos und kontraproduktiv." },
                                        { id: 26, text: "Nur kalte Speisen", correct: false, explanation: "Falsch! Nicht notwendig und unattraktiv." },
                                        { id: 27, text: "Einheitskost für alle", correct: false, explanation: "Falsch! Individuelle Bedürfnisse beachten." },
                                        { id: 28, text: "Mahlzeiten auslassen", correct: false, explanation: "Falsch! Verschlimmert Mangelernährung." },
                                        { id: 29, text: "Nur Flüssignahrung", correct: false, explanation: "Falsch! Zu restriktiv." },
                                        { id: 30, text: "Ohne Dokumentation", correct: false, explanation: "Falsch! Verlaufskontrolle essentiell." }
                                    ]
                                },
                                {
                                    problemId: 4,
                                    question: "Welche Maßnahmen sind korrekt für 'Soziale Isolation'? (Wähle 4)",
                                    options: [
                                        { id: 31, text: "Tägliche Besuchszeiten mit Angehörigen koordinieren", correct: true, explanation: "Richtig! Strukturierte soziale Kontakte." },
                                        { id: 32, text: "Teilnahme an Gemeinschaftsaktivitäten fördern", correct: true, explanation: "Richtig! Soziale Integration." },
                                        { id: 33, text: "Einzelgespräche anbieten", correct: true, explanation: "Richtig! Individuelle Zuwendung." },
                                        { id: 34, text: "Erinnerungspflege durchführen", correct: true, explanation: "Richtig! Biografiearbeit bei Demenz." },
                                        { id: 35, text: "Patient alleine lassen", correct: false, explanation: "Falsch! Verstärkt Isolation." },
                                        { id: 36, text: "Aktivitäten verweigern", correct: false, explanation: "Falsch! Verstärkt depressive Symptome." },
                                        { id: 37, text: "Keine Gespräche führen", correct: false, explanation: "Falsch! Soziale Vernachlässigung." },
                                        { id: 38, text: "Fernsehen als einzige Beschäftigung", correct: false, explanation: "Falsch! Passiv, keine soziale Interaktion." },
                                        { id: 39, text: "Kontakte zu anderen Bewohnern verhindern", correct: false, explanation: "Falsch! Verstärkt Isolation." },
                                        { id: 40, text: "Patient ignorieren", correct: false, explanation: "Falsch! Ethisch nicht vertretbar." }
                                    ]
                                }
                            ]
                        }
                    },
                    {
                        title: "Quiz: Fallbeispiele",
                        icon: "fas fa-brain",
                        content: "quiz",
                        quiz: [
                            {
                                question: "Welche Aussage beschreibt korrekt den ersten Schritt in der Pflegeplanung?",
                                options: [
                                    { text: "Sofort mit der Maßnahmenplanung beginnen", correct: false },
                                    { text: "Umfassende Informationssammlung und Assessment durchführen", correct: true },
                                    { text: "Ziele für den Patienten festlegen", correct: false },
                                    { text: "Pflegediagnosen auswählen", correct: false }
                                ],
                                explanation: "Richtig! Die Informationssammlung ist die Grundlage für eine gute Pflegeplanung."
                            },
                            {
                                question: "Warum ist die Ressourcenorientierung wichtig?",
                                options: [
                                    { text: "Weil sie die Eigenständigkeit des Patienten fördert", correct: true },
                                    { text: "Weil sie weniger Dokumentation erfordert", correct: false },
                                    { text: "Weil sie die Pflegekraft entlastet", correct: false },
                                    { text: "Weil sie vom Arzt verlangt wird", correct: false }
                                ],
                                explanation: "Genau! Die Ressourcenorientierung stärkt die Eigenständigkeit und Motivation des Patienten."
                            },
                            {
                                question: "Was ist ein SMART formuliertes Ziel?",
                                options: [
                                    { text: "Patient soll weniger Schmerzen haben", correct: false },
                                    { text: "Schmerzreduktion von 7/10 auf 3/10 innerhalb von 24 Stunden", correct: true },
                                    { text: "Patient soll sich besser fühlen", correct: false },
                                    { text: "Mobilität verbessern", correct: false }
                                ],
                                explanation: "Korrekt! SMART-Ziele sind spezifisch, messbar, attraktiv, realistisch und terminiert."
                            }
                        ]
                    }
                ]
            }
        ];

        // ==================== GAME STATE MANAGEMENT ====================
        let gameState = {
            user: { username: '', isLoggedIn: false },
            coins: 150,
            level: 1,
            xp: 0,
            progress: 0,
            unlockedModules: [1],
            completedModules: [],
            moduleScores: {},
            currentModule: null,
            currentLesson: 0,
            fallbeispielState: {
                currentStep: 1,
                selectedProbleme: [],
                currentZieleQuestion: 0,
                zieleScore: 0,
                currentMassnahmenQuestion: 0,
                massnahmenScore: 0,
                selectedMassnahmen: []
            }
        };

        // ==================== CORE FUNCTIONS ====================
        function initApp() {
            loadGameState();
            if (!gameState.user.isLoggedIn) {
                showLoginModal();
            } else {
                startApplication();
            }
            setupEventListeners();
            createFloatingIcons();
        }

        function loadGameState() {
            const saved = localStorage.getItem('pflegefachprofi_save');
            if (saved) {
                const parsed = JSON.parse(saved);
                gameState = { ...gameState, ...parsed };
            }
        }

        function saveGameState() {
            localStorage.setItem('pflegefachprofi_save', JSON.stringify(gameState));
        }

        function showLoginModal() {
            document.getElementById('login-modal').classList.add('active');
        }

        function hideLoginModal() {
            document.getElementById('login-modal').classList.remove('active');
        }

        function startApplication() {
            document.querySelector('.header').style.display = 'block';
            document.querySelector('.hero').style.display = 'block';
            document.querySelector('.learning-path').style.display = 'block';
            hideLoginModal();
            renderModules();
            updateUI();
        }

        function setupEventListeners() {
            // Login form
            document.getElementById('login-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;

                if (username && password) {
                    gameState.user = {
                        username: username,
                        isLoggedIn: true,
                        joinDate: new Date().toISOString()
                    };
                    saveGameState();
                    startApplication();
                }
            });
        }

        function createFloatingIcons() {
            const container = document.getElementById('floating-icons');
            if (!container) return;

            const icons = ['fas fa-heart-pulse', 'fas fa-syringe', 'fas fa-stethoscope', 'fas fa-user-md', 'fas fa-plus-square', 'fas fa-hand-holding-medical'];

            icons.forEach((icon, index) => {
                const iconEl = document.createElement('div');
                iconEl.className = `floating-icon`;
                iconEl.innerHTML = `<i class="${icon}"></i>`;
                iconEl.style.cssText = `
                    left: ${10 + (index * 15)}%;
                    top: ${20 + (index % 3) * 25}%;
                    animation-delay: ${index * 0.7}s;
                    color: rgba(255,255,255,0.8);
                `;
                container.appendChild(iconEl);
            });
        }

        function renderModules() {
            const container = document.getElementById('module-container');
            container.innerHTML = MODULES.map(module => `
                <div class="path-card ${gameState.unlockedModules.includes(module.id) ? '' : 'locked'}" data-module="${module.id}">
                    <div class="path-header">
                        <div class="path-icon">
                            <i class="${module.icon}"></i>
                        </div>
                        <div class="path-cost">
                            <i class="fas fa-coins"></i>
                            <span>${module.cost}</span>
                        </div>
                    </div>
                    <h3 class="path-title">${module.id}. ${module.title}</h3>
                    <p class="path-description">${module.description}</p>
                    <div class="path-stats">
                        <div class="stat">
                            <span class="stat-value">${module.lessons}</span>
                            <span class="stat-label">Lektionen</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value">${module.duration}</span>
                            <span class="stat-label">Dauer</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value">+${module.coins}</span>
                            <span class="stat-label">Coins</span>
                        </div>
                    </div>
                    ${renderModuleButton(module)}
                </div>
            `).join('');

            // Add event listeners to module buttons
            document.querySelectorAll('.path-action').forEach(button => {
                button.addEventListener('click', function() {
                    const card = this.closest('.path-card');
                    const moduleId = parseInt(card.dataset.module);
                    handleModuleAction(moduleId, this);
                });
            });
        }

        function renderModuleButton(module) {
            if (gameState.completedModules.includes(module.id)) {
                return `<button class="path-action continue">
                    <i class="fas fa-redo"></i>
                    Wiederholen
                </button>`;
            } else if (gameState.unlockedModules.includes(module.id)) {
                return `<button class="path-action start">
                    <i class="fas fa-play"></i>
                    Jetzt lernen
                </button>`;
            } else {
                const canAfford = gameState.coins >= module.cost;
                return `<button class="path-action unlock" ${!canAfford ? 'disabled' : ''}>
                    <i class="fas fa-${canAfford ? 'lock-open' : 'lock'}"></i>
                    ${canAfford ? `Für ${module.cost} Coins freischalten` : `Noch ${module.cost - gameState.coins} Coins benötigt`}
                </button>`;
            }
        }

        function handleModuleAction(moduleId, button) {
            const module = MODULES.find(m => m.id === moduleId);

            if (button.classList.contains('unlock')) {
                if (gameState.coins >= module.cost) {
                    gameState.coins -= module.cost;
                    gameState.unlockedModules.push(moduleId);
                    saveGameState();
                    renderModules();
                    updateUI();
                    startModule(moduleId);
                }
            } else if (button.classList.contains('start') || button.classList.contains('continue')) {
                startModule(moduleId);
            }
        }

        function startModule(moduleId) {
            gameState.currentModule = moduleId;
            gameState.currentLesson = 0;
            gameState.fallbeispielState = {
                currentStep: 1,
                selectedProbleme: [],
                currentZieleQuestion: 0,
                zieleScore: 0,
                currentMassnahmenQuestion: 0,
                massnahmenScore: 0,
                selectedMassnahmen: []
            };
            saveGameState();

            // Hide homepage, show learning module
            document.querySelector('.hero').style.display = 'none';
            document.querySelector('.learning-path').style.display = 'none';
            document.querySelector('.learning-module').classList.add('active');

            // Scroll to top of the page
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });

            loadLesson(moduleId, 0);
        }

        function loadLesson(moduleId, lessonIndex) {
            const module = MODULES.find(m => m.id === moduleId);
            const lesson = module.content[lessonIndex];

            document.getElementById('module-title').textContent = `${module.id}. ${module.title}`;

            // Update progress steps
            const stepsContainer = document.getElementById('module-steps');
            stepsContainer.innerHTML = '';
            for (let i = 0; i < module.content.length; i++) {
                const step = document.createElement('div');
                step.className = `step ${i === lessonIndex ? 'active' : i < lessonIndex ? 'completed' : ''}`;
                step.dataset.step = i + 1;
                stepsContainer.appendChild(step);
            }

            document.getElementById('step-counter').textContent = `Schritt ${lessonIndex + 1} von ${module.content.length}`;

            // Load lesson content
            const container = document.getElementById('lesson-container');
            if (lesson.content === 'quiz') {
                loadQuiz(module, lesson, container);
            } else if (lesson.content === 'fallbeispiel') {
                loadFallbeispiel(module, lesson, container, lessonIndex);
            } else {
                container.innerHTML = `
                    <div class="lesson-card active">
                        <div class="lesson-icon">
                            <i class="${lesson.icon}"></i>
                        </div>
                        <h3 class="text-center">${lesson.title}</h3>
                        ${lesson.content}
                        <div class="navigation">
                            <button class="nav-btn" onclick="previousLesson()" ${lessonIndex === 0 ? 'disabled' : ''}>
                                <i class="fas fa-arrow-left"></i>
                                Zurück
                            </button>
                            <button class="nav-btn" onclick="nextLesson()">
                                ${lessonIndex === module.content.length - 1 ? 'Abschließen' : 'Weiter'}
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                `;
            }
        }

        function loadFallbeispiel(module, lesson, container, lessonIndex) {
            const fallbeispiel = lesson.fallbeispiel;

            switch(gameState.fallbeispielState.currentStep) {
                case 1:
                    loadFallbeispielProbleme(module, lesson, container, lessonIndex, fallbeispiel);
                    break;
                case 2:
                    loadFallbeispielZiele(module, lesson, container, lessonIndex, fallbeispiel);
                    break;
                case 3:
                    loadFallbeispielMassnahmen(module, lesson, container, lessonIndex, fallbeispiel);
                    break;
                case 4:
                    evaluateFallbeispiel(module, lesson, container, lessonIndex, fallbeispiel);
                    break;
            }
        }

        function loadFallbeispielProbleme(module, lesson, container, lessonIndex, fallbeispiel) {
            container.innerHTML = `
                <div class="lesson-card active">
                    <div class="lesson-icon">
                        <i class="${lesson.icon}"></i>
                    </div>
                    <h3 class="text-center">${lesson.title} - Probleme identifizieren</h3>

                    <div class="case-study">
                        <h4>Patientensituation:</h4>
                        <p><strong>${fallbeispiel.patient.name} (${fallbeispiel.patient.alter} Jahre)</strong> - ${fallbeispiel.patient.situation}</p>

                        <div class="key-point">
                            <i class="fas fa-notes-medical"></i>
                            <strong>Assessment-Daten:</strong>
                            <ul>
                                ${fallbeispiel.assessment.map(item => `<li>${item}</li>`).join('')}
                            </ul>
                        </div>
                    </div>

                    <h4 style="margin-top: var(--spacing-lg);">Wähle die 4 korrekten Pflegeprobleme:</h4>
                    <div class="problem-selection" id="problem-selection">
                        ${fallbeispiel.problems.map(problem => `
                            <div class="problem-option" data-problem="${problem.id}">
                                <strong>${problem.text}</strong>
                            </div>
                        `).join('')}
                    </div>

                    <div class="navigation">
                        <button class="nav-btn" onclick="previousLesson()" ${lessonIndex === 0 ? 'disabled' : ''}>
                            <i class="fas fa-arrow-left"></i>
                            Zurück
                        </button>
                        <button class="nav-btn" id="next-probleme">
                            Ziele festlegen
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            `;

            // Add event listeners to problem options
            document.querySelectorAll('.problem-option').forEach(option => {
                option.addEventListener('click', function() {
                    this.classList.toggle('selected');

                    const problemId = parseInt(this.dataset.problem);
                    if (this.classList.contains('selected')) {
                        if (!gameState.fallbeispielState.selectedProbleme.includes(problemId)) {
                            gameState.fallbeispielState.selectedProbleme.push(problemId);
                        }
                    } else {
                        const index = gameState.fallbeispielState.selectedProbleme.indexOf(problemId);
                        if (index > -1) {
                            gameState.fallbeispielState.selectedProbleme.splice(index, 1);
                        }
                    }

                    saveGameState();
                });
            });

            document.getElementById('next-probleme').addEventListener('click', function() {
                if (gameState.fallbeispielState.selectedProbleme.length === 4) {
                    gameState.fallbeispielState.currentStep = 2;
                    saveGameState();
                    loadLesson(gameState.currentModule, lessonIndex);
                } else {
                    alert('Bitte wähle genau 4 Pflegeprobleme aus!');
                }
            });
        }

        function loadFallbeispielZiele(module, lesson, container, lessonIndex, fallbeispiel) {
            const currentQuestionIndex = gameState.fallbeispielState.currentZieleQuestion;
            const question = fallbeispiel.zieleQuestions[currentQuestionIndex];

            container.innerHTML = `
                <div class="lesson-card active">
                    <div class="lesson-icon">
                        <i class="fas fa-bullseye"></i>
                    </div>
                    <h3 class="text-center">${lesson.title} - Ziele festlegen</h3>

                    <div class="smart-goals">
                        <h4>SMART-Ziele formulieren:</h4>
                        <p>Ziele sollten <strong>spezifisch, messbar, attraktiv, realistisch und terminiert</strong> sein.</p>
                    </div>

                    <div class="quiz-progress">
                        <span>Frage ${currentQuestionIndex + 1} von 4</span>
                    </div>

                    <div class="quiz-question">${question.question}</div>
                    <div class="quiz-options">
                        ${question.options.map(option => `
                            <div class="quiz-option" data-option="${option.id}" data-correct="${option.correct}">
                                <div class="option-indicator">${String.fromCharCode(65 + question.options.indexOf(option))}</div>
                                <div class="option-text">${option.text}</div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="quiz-feedback" id="quiz-feedback"></div>

                    <div class="navigation">
                        <button class="nav-btn" onclick="previousZieleQuestion()" ${currentQuestionIndex === 0 ? 'disabled' : ''}>
                            <i class="fas fa-arrow-left"></i>
                            Vorherige Frage
                        </button>
                        <button class="nav-btn" id="next-ziele" style="display: none;">
                            ${currentQuestionIndex === 3 ? 'Zu Maßnahmen' : 'Nächste Frage'}
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            `;

            // Add event listeners to goal options
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.addEventListener('click', function() {
                    handleZieleAnswer(this, question);
                });
            });

            document.getElementById('next-ziele').addEventListener('click', function() {
                if (currentQuestionIndex < 3) {
                    gameState.fallbeispielState.currentZieleQuestion++;
                    saveGameState();
                    loadLesson(gameState.currentModule, lessonIndex);
                } else {
                    gameState.fallbeispielState.currentStep = 3;
                    saveGameState();
                    loadLesson(gameState.currentModule, lessonIndex);
                }
            });
        }

        function handleZieleAnswer(selectedOption, question) {
            const isCorrect = selectedOption.dataset.correct === 'true';
            const feedback = document.getElementById('quiz-feedback');
            const nextBtn = document.getElementById('next-ziele');

            // Disable all options
            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.style.pointerEvents = 'none';
            });

            // Mark correct/incorrect
            selectedOption.classList.add(isCorrect ? 'correct' : 'incorrect');

            // Show correct answer if wrong
            if (!isCorrect) {
                document.querySelector('.quiz-option[data-correct="true"]').classList.add('correct');
            }

            // Show feedback
            const correctOption = question.options.find(opt => opt.correct);
            feedback.textContent = isCorrect ? correctOption.explanation : selectedOption.dataset.correct === 'false' ? question.options.find(opt => opt.id == selectedOption.dataset.option).explanation : correctOption.explanation;
            feedback.classList.add(isCorrect ? 'correct' : 'incorrect');
            feedback.style.display = 'block';

            // Update score
            if (isCorrect) {
                gameState.fallbeispielState.zieleScore++;
                document.getElementById('lesson-container').classList.add('correct-flash');
                createConfetti();
            } else {
                document.getElementById('lesson-container').classList.add('incorrect-flash');
            }

            // Show next button
            nextBtn.style.display = 'flex';
            saveGameState();
        }

        function previousZieleQuestion() {
            if (gameState.fallbeispielState.currentZieleQuestion > 0) {
                gameState.fallbeispielState.currentZieleQuestion--;
                saveGameState();
                loadLesson(gameState.currentModule, gameState.currentLesson);
            }
        }

        function loadFallbeispielMassnahmen(module, lesson, container, lessonIndex, fallbeispiel) {
            const currentQuestionIndex = gameState.fallbeispielState.currentMassnahmenQuestion;
            const question = fallbeispiel.massnahmenQuestions[currentQuestionIndex];
            const selectedCount = gameState.fallbeispielState.selectedMassnahmen.filter(m => 
                m.questionIndex === currentQuestionIndex
            ).length;

            container.innerHTML = `
                <div class="lesson-card active">
                    <div class="lesson-icon">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <h3 class="text-center">${lesson.title} - Maßnahmen planen</h3>

                    <div class="quiz-progress">
                        <span>Frage ${currentQuestionIndex + 1} von 4 - Ausgewählt: ${selectedCount}/4</span>
                    </div>

                    <div class="quiz-question">${question.question}</div>
                    <div class="quiz-options">
                        ${question.options.map(option => `
                            <div class="quiz-option ${gameState.fallbeispielState.selectedMassnahmen.some(m => m.optionId === option.id && m.questionIndex === currentQuestionIndex) ? 'selected' : ''}" 
                                 data-option="${option.id}" data-correct="${option.correct}">
                                <div class="option-indicator">${String.fromCharCode(65 + question.options.indexOf(option))}</div>
                                <div class="option-text">${option.text}</div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="quiz-feedback" id="quiz-feedback" style="display: none;"></div>

                    <div class="navigation">
                        <button class="nav-btn" onclick="previousMassnahmenQuestion()" ${currentQuestionIndex === 0 ? 'disabled' : ''}>
                            <i class="fas fa-arrow-left"></i>
                            Vorherige Frage
                        </button>
                        <button class="nav-btn" id="check-massnahmen">
                            Antwort überprüfen
                        </button>
                        <button class="nav-btn" id="next-massnahmen" style="display: none;">
                            ${currentQuestionIndex === 3 ? 'Auswertung' : 'Nächste Frage'}
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            `;

            // Add event listeners to measure options
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.addEventListener('click', function() {
                    const optionId = parseInt(this.dataset.option);
                    const isSelected = this.classList.contains('selected');

                    if (!isSelected && selectedCount < 4) {
                        this.classList.add('selected');
                        gameState.fallbeispielState.selectedMassnahmen.push({
                            questionIndex: currentQuestionIndex,
                            optionId: optionId
                        });
                    } else if (isSelected) {
                        this.classList.remove('selected');
                        const index = gameState.fallbeispielState.selectedMassnahmen.findIndex(m => 
                            m.questionIndex === currentQuestionIndex && m.optionId === optionId
                        );
                        if (index > -1) {
                            gameState.fallbeispielState.selectedMassnahmen.splice(index, 1);
                        }
                    }

                    // Update selected count display
                    const newSelectedCount = gameState.fallbeispielState.selectedMassnahmen.filter(m => 
                        m.questionIndex === currentQuestionIndex
                    ).length;
                    document.querySelector('.quiz-progress span').textContent = 
                        `Frage ${currentQuestionIndex + 1} von 4 - Ausgewählt: ${newSelectedCount}/4`;

                    saveGameState();
                });
            });

            document.getElementById('check-massnahmen').addEventListener('click', function() {
                checkMassnahmenAnswer(question, currentQuestionIndex);
            });

            document.getElementById('next-massnahmen').addEventListener('click', function() {
                if (currentQuestionIndex < 3) {
                    gameState.fallbeispielState.currentMassnahmenQuestion++;
                    saveGameState();
                    loadLesson(gameState.currentModule, lessonIndex);
                } else {
                    gameState.fallbeispielState.currentStep = 4;
                    saveGameState();
                    loadLesson(gameState.currentModule, lessonIndex);
                }
            });
        }

        function checkMassnahmenAnswer(question, questionIndex) {
            const selectedOptions = gameState.fallbeispielState.selectedMassnahmen
                .filter(m => m.questionIndex === questionIndex)
                .map(m => m.optionId);

            const correctOptions = question.options.filter(opt => opt.correct).map(opt => opt.id);
            const isCorrect = selectedOptions.length === 4 && 
                             selectedOptions.every(id => correctOptions.includes(id)) &&
                             correctOptions.every(id => selectedOptions.includes(id));

            const feedback = document.getElementById('quiz-feedback');
            const checkBtn = document.getElementById('check-massnahmen');
            const nextBtn = document.getElementById('next-massnahmen');

            // Disable all options
            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.style.pointerEvents = 'none';
            });

            // Mark correct/incorrect options
            document.querySelectorAll('.quiz-option').forEach(opt => {
                const optionId = parseInt(opt.dataset.option);
                const isActuallyCorrect = question.options.find(o => o.id === optionId).correct;

                if (isActuallyCorrect) {
                    opt.classList.add('correct');
                } else if (selectedOptions.includes(optionId)) {
                    opt.classList.add('incorrect');
                }
            });

            // Show feedback
            if (isCorrect) {
                feedback.textContent = "Perfekt! Du hast alle korrekten Maßnahmen ausgewählt.";
                feedback.className = 'quiz-feedback correct';
                gameState.fallbeispielState.massnahmenScore++;
                document.getElementById('lesson-container').classList.add('correct-flash');
                createConfetti();
            } else {
                feedback.textContent = "Nicht alle korrekten Maßnahmen wurden ausgewählt. Die grün markierten sind die richtigen Antworten.";
                feedback.className = 'quiz-feedback incorrect';
                document.getElementById('lesson-container').classList.add('incorrect-flash');
            }
            feedback.style.display = 'block';

            // Show next button, hide check button
            checkBtn.style.display = 'none';
            nextBtn.style.display = 'flex';

            saveGameState();
        }

        function previousMassnahmenQuestion() {
            if (gameState.fallbeispielState.currentMassnahmenQuestion > 0) {
                gameState.fallbeispielState.currentMassnahmenQuestion--;
                saveGameState();
                loadLesson(gameState.currentModule, gameState.currentLesson);
            }
        }

        function evaluateFallbeispiel(module, lesson, container, lessonIndex, fallbeispiel) {
            const totalScore = gameState.fallbeispielState.zieleScore + gameState.fallbeispielState.massnahmenScore;
            const maxScore = 8; // 4 Ziele + 4 Maßnahmen Fragen
            const percentage = Math.round((totalScore / maxScore) * 100);
            
            // Calculate percentage-based rewards
            const coinsEarned = Math.round(module.coins * (percentage / 100));
            const xpEarned = Math.round(module.xp * (percentage / 100));

            container.innerHTML = `
                <div class="lesson-card active">
                    <div class="lesson-icon">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <h3 class="text-center">${lesson.title} - Auswertung</h3>

                    <div class="quiz-results active">
                        <div class="result-icon ${percentage >= 60 ? 'correct' : ''}">
                            <i class="fas fa-${percentage >= 60 ? 'trophy' : 'chart-line'}"></i>
                        </div>
                        <h2 class="result-title">Fallbeispiel abgeschlossen!</h2>
                        <div class="result-score ${percentage >= 80 ? 'good' : percentage >= 60 ? 'average' : 'poor'}">
                            ${percentage}% Gesamt
                        </div>

                        <div style="margin: var(--spacing-lg) 0;">
                            <h4>Detailauswertung:</h4>
                            <p><strong>Ziele:</strong> ${gameState.fallbeispielState.zieleScore}/4 richtig</p>
                            <p><strong>Maßnahmen:</strong> ${gameState.fallbeispielState.massnahmenScore}/4 richtig</p>
                        </div>

                        ${percentage >= 60 ? `
                            <div class="reward-animation">
                                <div class="reward-item">
                                    <div class="reward-icon coins">
                                        <i class="fas fa-coins"></i>
                                    </div>
                                    <div class="reward-amount">+${coinsEarned}</div>
                                </div>
                                <div class="reward-item">
                                    <div class="reward-icon xp">
                                        <i class="fas fa-fire"></i>
                                    </div>
                                    <div class="reward-amount">+${xpEarned}</div>
                                </div>
                            </div>
                            <div class="module-complete celebrate">
                                <h3><i class="fas fa-trophy"></i> Ausgezeichnet!</h3>
                                <p>Du hast das Fallbeispiel erfolgreich abgeschlossen!</p>
                            </div>
                        ` : `
                            <div class="key-point">
                                <i class="fas fa-lightbulb"></i>
                                <strong>Tipp:</strong>
                                <p>Übe die Fallbeispiele weiter, um deine Fähigkeiten in der Pflegeplanung zu verbessern!</p>
                            </div>
                        `}

                        <div class="countdown">
                            Rückkehr in <span id="countdown-number">5</span> Sekunden...
                        </div>
                    </div>
                </div>
            `;

            // Add rewards if passed
            if (percentage >= 60 && !gameState.completedModules.includes(gameState.currentModule)) {
                gameState.coins += coinsEarned;
                gameState.xp += xpEarned;
                gameState.completedModules.push(gameState.currentModule);

                // Check level up
                const newLevel = calculateLevel(gameState.xp);
                if (newLevel > gameState.level) {
                    gameState.level = newLevel;
                    showLevelUpCelebration(newLevel);
                }

                saveGameState();
                updateUI();
                if (percentage >= 80) createConfetti();
            }

            // Start countdown to return
            startCountdown();
        }

        function loadQuiz(module, lesson, container) {
            container.innerHTML = `
                <div class="quiz-container">
                    <div class="quiz-header">
                        <h3>Quiz: ${module.title}</h3>
                        <p>Teste dein Wissen und verdiene ${module.coins} Coins!</p>
                    </div>
                    <div class="quiz-progress">
                        <span id="quiz-counter">Frage 1 von ${lesson.quiz.length}</span>
                        <div class="module-steps" id="quiz-steps">
                            ${lesson.quiz.map((_, i) => `<div class="step ${i === 0 ? 'active' : ''}" data-question="${i + 1}"></div>`).join('')}
                        </div>
                    </div>
                    <div class="quiz-content" id="quiz-content">
                        <!-- Quiz questions will be loaded here -->
                    </div>
                    <div class="quiz-results" id="quiz-results">
                        <div class="result-icon correct">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <h2 class="result-title">Quiz abgeschlossen!</h2>
                        <div class="result-score good" id="score-display">0/0 Richtige</div>
                        <div class="reward-animation">
                            <div class="reward-item">
                                <div class="reward-icon coins">
                                    <i class="fas fa-coins"></i>
                                </div>
                                <div class="reward-amount" id="coins-earned">+0</div>
                            </div>
                            <div class="reward-item">
                                <div class="reward-icon xp">
                                    <i class="fas fa-fire"></i>
                                </div>
                                <div class="reward-amount" id="xp-earned">+0</div>
                            </div>
                        </div>
                        <p id="result-message"></p>
                        <div class="countdown" id="countdown">
                            Rückkehr in <span id="countdown-number">5</span> Sekunden...
                        </div>
                    </div>
                </div>
            `;

            startQuiz(module, lesson.quiz);
        }

        let currentQuestion = 0;
        let quizScore = 0;
        let quizQuestions = [];

        function startQuiz(module, questions) {
            currentQuestion = 0;
            quizScore = 0;
            quizQuestions = questions;
            loadQuestion(currentQuestion);
        }

        function loadQuestion(index) {
            const question = quizQuestions[index];
            const content = document.getElementById('quiz-content');
            const steps = document.querySelectorAll('#quiz-steps .step');

            steps.forEach((step, i) => {
                step.classList.remove('active');
                if (i === index) step.classList.add('active');
            });

            document.getElementById('quiz-counter').textContent = `Frage ${index + 1} von ${quizQuestions.length}`;

            content.innerHTML = `
                <div class="quiz-question">${question.question}</div>
                <div class="quiz-options">
                    ${question.options.map((option, i) => `
                        <div class="quiz-option" data-correct="${option.correct}" data-index="${i}">
                            <div class="option-indicator">${String.fromCharCode(65 + i)}</div>
                            <div class="option-text">${option.text}</div>
                        </div>
                    `).join('')}
                </div>
                <div class="quiz-feedback" id="quiz-feedback"></div>
                <div class="navigation" style="margin-top: var(--spacing-lg);">
                    <button class="nav-btn" id="next-question" style="display: none;">
                        ${index === quizQuestions.length - 1 ? 'Ergebnisse anzeigen' : 'Nächste Frage'}
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            `;

            // Add event listeners
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.addEventListener('click', handleAnswer);
            });

            document.getElementById('next-question').addEventListener('click', nextQuestion);
        }

        function handleAnswer(e) {
            const option = e.currentTarget;
            const isCorrect = option.dataset.correct === 'true';
            const feedback = document.getElementById('quiz-feedback');
            const nextBtn = document.getElementById('next-question');

            // Disable all options
            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.style.pointerEvents = 'none';
            });

            // Mark correct/incorrect
            option.classList.add(isCorrect ? 'correct' : 'incorrect');

            // Show correct answer if wrong
            if (!isCorrect) {
                document.querySelector('.quiz-option[data-correct="true"]').classList.add('correct');
            }

            // Show feedback
            feedback.textContent = quizQuestions[currentQuestion].explanation;
            feedback.classList.add(isCorrect ? 'correct' : 'incorrect');
            feedback.style.display = 'block';

            // Update score
            if (isCorrect) {
                quizScore++;
                document.getElementById('quiz-content').classList.add('correct-flash');
            } else {
                document.getElementById('quiz-content').classList.add('incorrect-flash');
            }

            // Show next button
            nextBtn.style.display = 'flex';
        }

        function nextQuestion() {
            currentQuestion++;

            if (currentQuestion < quizQuestions.length) {
                loadQuestion(currentQuestion);
            } else {
                showQuizResults();
            }
        }

        function showQuizResults() {
            const module = MODULES.find(m => m.id === gameState.currentModule);
            const percentage = Math.round((quizScore / quizQuestions.length) * 100);
            const coinsEarned = Math.round(module.coins * (percentage / 100));
            const xpEarned = Math.round(module.xp * (percentage / 100));

            document.getElementById('quiz-content').style.display = 'none';
            document.getElementById('quiz-results').classList.add('active');

            document.getElementById('score-display').textContent = `${quizScore}/${quizQuestions.length} Richtige (${percentage}%)`;
            document.getElementById('coins-earned').textContent = `+${coinsEarned}`;
            document.getElementById('xp-earned').textContent = `+${xpEarned}`;

            // Set score style
            const scoreDisplay = document.getElementById('score-display');
            if (percentage >= 80) {
                scoreDisplay.className = 'result-score good';
                document.getElementById('result-message').textContent = 'Herzlichen Glückwunsch! Exzellente Leistung!';
                createConfetti();
            } else if (percentage >= 60) {
                scoreDisplay.className = 'result-score average';
                document.getElementById('result-message').textContent = 'Gut gemacht! Du kehrst jetzt zum Lernpfad zurück.';
            } else {
                scoreDisplay.className = 'result-score poor';
                document.getElementById('result-message').textContent = 'Weiter so! Übung macht den Meister. Du kannst es nochmal versuchen.';
            }

            // Add rewards if passed (60% or higher)
            if (percentage >= 60 && !gameState.completedModules.includes(gameState.currentModule)) {
                gameState.coins += coinsEarned;
                gameState.xp += xpEarned;
                gameState.completedModules.push(gameState.currentModule);
                gameState.progress = Math.min(100, Math.floor((gameState.completedModules.length / MODULES.length) * 100));

                // Check level up
                const newLevel = calculateLevel(gameState.xp);
                if (newLevel > gameState.level) {
                    gameState.level = newLevel;
                    showLevelUpCelebration(newLevel);
                }
            }

            saveGameState();
            updateUI();

            // Start countdown to return
            startCountdown();
        }

        function calculateLevel(xp) {
            if (xp >= 1000) return 5;
            if (xp >= 600) return 4;
            if (xp >= 300) return 3;
            if (xp >= 100) return 2;
            return 1;
        }

        function showLevelUpCelebration(newLevel) {
            const celebration = document.createElement('div');
            celebration.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: var(--surface);
                padding: var(--spacing-xl);
                border-radius: var(--radius-lg);
                box-shadow: var(--shadow-elevated);
                text-align: center;
                z-index: 2000;
                animation: fadeIn 0.5s ease;
            `;
            celebration.innerHTML = `
                <div style="font-size: 3rem; margin-bottom: var(--spacing-md);">🎉</div>
                <h3>Level Aufstieg!</h3>
                <p>Du hast Level ${newLevel} erreicht!</p>
            `;
            document.body.appendChild(celebration);

            setTimeout(() => {
                celebration.remove();
                createConfetti();
            }, 3000);
        }

        function startCountdown() {
            let countdown = 5;
            const countdownEl = document.getElementById('countdown-number');

            const timer = setInterval(() => {
                countdown--;
                countdownEl.textContent = countdown;

                if (countdown <= 0) {
                    clearInterval(timer);
                    returnToHomepage();
                }
            }, 1000);
        }

        function returnToHomepage() {
            document.querySelector('.learning-module').classList.remove('active');
            document.querySelector('.hero').style.display = 'block';
            document.querySelector('.learning-path').style.display = 'block';
            renderModules();

            // Scroll to learning path
            document.getElementById('learning-path').scrollIntoView({ behavior: 'smooth' });
        }

        function nextLesson() {
            const module = MODULES.find(m => m.id === gameState.currentModule);
            if (gameState.currentLesson < module.content.length - 1) {
                gameState.currentLesson++;
                loadLesson(gameState.currentModule, gameState.currentLesson);
            }
        }

        function previousLesson() {
            if (gameState.currentLesson > 0) {
                gameState.currentLesson--;
                loadLesson(gameState.currentModule, gameState.currentLesson);
            }
        }

        function updateUI() {
            document.getElementById('coin-count').textContent = gameState.coins;
            document.getElementById('level-count').textContent = gameState.level;
            document.getElementById('xp-count').textContent = gameState.xp;
        }

        function createConfetti() {
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.cssText = `
                    position: fixed;
                    width: 10px;
                    height: 10px;
                    background: ${['#4361ee', '#7209b7', '#f72585', '#4cc9f0', '#ffd166'][Math.floor(Math.random() * 5)]};
                    top: -20px;
                    left: ${Math.random() * 100}vw;
                    animation: fall ${Math.random() * 3 + 2}s linear forwards;
                    border-radius: 2px;
                    z-index: 1000;
                `;
                document.body.appendChild(confetti);

                setTimeout(() => confetti.remove(), 5000);
            }
        }

        // Global functions for navigation
        window.nextLesson = nextLesson;
        window.previousLesson = previousLesson;
        window.previousZieleQuestion = previousZieleQuestion;
        window.previousMassnahmenQuestion = previousMassnahmenQuestion;

        // Initialize the app
        document.addEventListener('DOMContentLoaded', initApp);




        // Add this to your existing JavaScript

// Mobile Navigation functionality
function setupNavigation() {
    const navToggle = document.getElementById('nav-toggle');
    const mainNav = document.getElementById('main-nav');
    
    // Create overlay for mobile menu
    const overlay = document.createElement('div');
    overlay.className = 'nav-overlay';
    document.body.appendChild(overlay);
    
    // Toggle mobile menu
    navToggle.addEventListener('click', function() {
        mainNav.classList.toggle('active');
        overlay.classList.toggle('active');
        document.body.style.overflow = mainNav.classList.contains('active') ? 'hidden' : '';
    });
    
    // Close menu when clicking overlay
    overlay.addEventListener('click', function() {
        mainNav.classList.remove('active');
        overlay.classList.remove('active');
        document.body.style.overflow = '';
    });
    
    // Close menu when clicking nav links
    document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', function(e) {
            if (this.id === 'progress-link' || this.id === 'achievements-link') {
                e.preventDefault();
                showFeatureComingSoon();
            }
            
            // Update active state
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            this.classList.add('active');
            
            // Close mobile menu
            if (window.innerWidth <= 768) {
                mainNav.classList.remove('active');
                overlay.classList.remove('active');
                document.body.style.overflow = '';
            }
            
            // Show appropriate sections
            const section = this.dataset.section;
            if (section === 'home' || section === 'learning-path') {
                returnToHomepage();
            }
        });
    });
}

function showFeatureComingSoon() {
    alert('Diese Funktion wird in Kürze verfügbar sein! 🚀\n\nWir arbeiten hart daran, dir die beste Lernerfahrung zu bieten.');
}

// Update the startApplication function to include navigation setup
function startApplication() {
    document.querySelector('.header').style.display = 'block';
    document.querySelector('.hero').style.display = 'block';
    document.querySelector('.learning-path').style.display = 'block';
    hideLoginModal();
    renderModules();
    updateUI();
    setupNavigation(); // Add this line
}


// Mobile Navigation Functionality
const mobileNavToggle = document.getElementById('mobileNavToggle');
const mobileNavMenu = document.getElementById('mobileNavMenu');
const mobileNavOverlay = document.getElementById('mobileNavOverlay');

function toggleMobileNav() {
    mobileNavMenu.classList.toggle('active');
    mobileNavOverlay.classList.toggle('active');
    document.body.style.overflow = mobileNavMenu.classList.contains('active') ? 'hidden' : '';
    
    // Change icon
    const icon = mobileNavToggle.querySelector('i');
    icon.className = mobileNavMenu.classList.contains('active') ? 'fas fa-times' : 'fas fa-bars';
}

mobileNavToggle.addEventListener('click', toggleMobileNav);
mobileNavOverlay.addEventListener('click', toggleMobileNav);

// Close mobile nav when clicking on links
document.querySelectorAll('.mobile-nav-link').forEach(link => {
    link.addEventListener('click', () => {
        mobileNavMenu.classList.remove('active');
        mobileNavOverlay.classList.remove('active');
        document.body.style.overflow = '';
        mobileNavToggle.querySelector('i').className = 'fas fa-bars';
    });
});

// Handle window resize
window.addEventListener('resize', () => {
    if (window.innerWidth > 768) {
        mobileNavMenu.classList.remove('active');
        mobileNavOverlay.classList.remove('active');
        document.body.style.overflow = '';
        mobileNavToggle.querySelector('i').className = 'fas fa-bars';
    }
});

// Add active class to current page
document.addEventListener('DOMContentLoaded', function() {
    const currentPage = window.location.pathname.split('/').pop();
    const navLinks = document.querySelectorAll('.mobile-nav-link, .hero-nav-btn');
    
    navLinks.forEach(link => {
        if (link.getAttribute('href') === currentPage) {
            link.classList.add('active');
        }
    });
});

        
    </script>
</body>
</html>
